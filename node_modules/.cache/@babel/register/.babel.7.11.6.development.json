{
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/app.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong",
      "filename": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/app.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/app.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _index = _interopRequireDefault(require(\"./socket.io/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst express = require('express');\n\nconst app = express();\nconst host = '0.0.0.0';\nconst httpPort = 3000;\nconst socketPort = 777;\n\nconst path = require('path');\n\napp.use('/public', express.static(path.join(__dirname, 'public')));\napp.set('view engine', 'ejs');\napp.set('views', path.join(__dirname, '/views'));\n\n_index.default.listen(socketPort, host, () => {\n  console.log({\n    task: 'socket server',\n    host,\n    socketPort\n  });\n});\n\napp.listen(httpPort, host, () => {\n  console.log({\n    task: 'app server',\n    host,\n    httpPort\n  });\n});\napp.get('/game', (req, res) => {\n  res.render('index');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImhvc3QiLCJodHRwUG9ydCIsInNvY2tldFBvcnQiLCJwYXRoIiwidXNlIiwic3RhdGljIiwiam9pbiIsIl9fZGlybmFtZSIsInNldCIsInNvY2tldFNlcnZlciIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJ0YXNrIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIl0sIm1hcHBpbmdzIjoiOztBQU9BOzs7O0FBUEEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdGLE9BQU8sRUFBbkI7QUFDQSxNQUFNRyxJQUFJLEdBQUcsU0FBYjtBQUNBLE1BQU1DLFFBQVEsR0FBRyxJQUFqQjtBQUNBLE1BQU1DLFVBQVUsR0FBRyxHQUFuQjs7QUFDQSxNQUFNQyxJQUFJLEdBQUdMLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUlBQyxHQUFHLENBQUNLLEdBQUosQ0FBUSxTQUFSLEVBQW1CUCxPQUFPLENBQUNRLE1BQVIsQ0FBZUYsSUFBSSxDQUFDRyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsUUFBckIsQ0FBZixDQUFuQjtBQUNBUixHQUFHLENBQUNTLEdBQUosQ0FBUSxhQUFSLEVBQXVCLEtBQXZCO0FBQ0FULEdBQUcsQ0FBQ1MsR0FBSixDQUFRLE9BQVIsRUFBaUJMLElBQUksQ0FBQ0csSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFFBQXJCLENBQWpCOztBQUNBRSxlQUFhQyxNQUFiLENBQW9CUixVQUFwQixFQUErQkYsSUFBL0IsRUFBb0MsTUFBSTtBQUNwQ1csRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFDUkMsSUFBQUEsSUFBSSxFQUFFLGVBREU7QUFFUmIsSUFBQUEsSUFGUTtBQUdSRSxJQUFBQTtBQUhRLEdBQVo7QUFLSCxDQU5EOztBQU9BSCxHQUFHLENBQUNXLE1BQUosQ0FBV1QsUUFBWCxFQUFvQkQsSUFBcEIsRUFBMEIsTUFBSTtBQUMxQlcsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFDUkMsSUFBQUEsSUFBSSxFQUFFLFlBREU7QUFFUmIsSUFBQUEsSUFGUTtBQUdSQyxJQUFBQTtBQUhRLEdBQVo7QUFLSCxDQU5EO0FBUUFGLEdBQUcsQ0FBQ2UsR0FBSixDQUFRLE9BQVIsRUFBZ0IsQ0FBQ0MsR0FBRCxFQUFLQyxHQUFMLEtBQVc7QUFDdkJBLEVBQUFBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLE9BQVg7QUFDSCxDQUZEIiwic291cmNlUm9vdCI6Ii9tZWRpYS90b2FuaDI2MTIvRGF0YTEvbGVhcm4vRW1iZWRkZWQgc29mdHdhcmUvcHJvamVjdC9waW5nLXBvbmcvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBob3N0ID0gJzAuMC4wLjAnO1xuY29uc3QgaHR0cFBvcnQgPSAzMDAwO1xuY29uc3Qgc29ja2V0UG9ydCA9IDc3NztcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmltcG9ydCBzb2NrZXRTZXJ2ZXIgZnJvbSAnLi9zb2NrZXQuaW8vaW5kZXgnO1xuXG5hcHAudXNlKCcvcHVibGljJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJ3B1YmxpYycpKSlcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2VqcycpO1xuYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oX19kaXJuYW1lLCAnL3ZpZXdzJykpO1xuc29ja2V0U2VydmVyLmxpc3Rlbihzb2NrZXRQb3J0LGhvc3QsKCk9PntcbiAgICBjb25zb2xlLmxvZyh7XG4gICAgICAgIHRhc2s6ICdzb2NrZXQgc2VydmVyJyxcbiAgICAgICAgaG9zdCxcbiAgICAgICAgc29ja2V0UG9ydCBcbiAgICB9KTtcbn0pXG5hcHAubGlzdGVuKGh0dHBQb3J0LGhvc3QsICgpPT57XG4gICAgY29uc29sZS5sb2coe1xuICAgICAgICB0YXNrOiAnYXBwIHNlcnZlcicsXG4gICAgICAgIGhvc3QsXG4gICAgICAgIGh0dHBQb3J0IFxuICAgIH0pO1xufSk7XG5cbmFwcC5nZXQoJy9nYW1lJywocmVxLHJlcyk9PntcbiAgICByZXMucmVuZGVyKCdpbmRleCcpO1xufSlcblxuXG5cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "express",
        "require",
        "app",
        "host",
        "httpPort",
        "socketPort",
        "path",
        "use",
        "static",
        "join",
        "__dirname",
        "set",
        "socketServer",
        "listen",
        "console",
        "log",
        "task",
        "get",
        "req",
        "res",
        "render"
      ],
      "mappings": ";;AAOA;;;;AAPA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,GAAG,GAAGF,OAAO,EAAnB;AACA,MAAMG,IAAI,GAAG,SAAb;AACA,MAAMC,QAAQ,GAAG,IAAjB;AACA,MAAMC,UAAU,GAAG,GAAnB;;AACA,MAAMC,IAAI,GAAGL,OAAO,CAAC,MAAD,CAApB;;AAIAC,GAAG,CAACK,GAAJ,CAAQ,SAAR,EAAmBP,OAAO,CAACQ,MAAR,CAAeF,IAAI,CAACG,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAnB;AACAR,GAAG,CAACS,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAT,GAAG,CAACS,GAAJ,CAAQ,OAAR,EAAiBL,IAAI,CAACG,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAjB;;AACAE,eAAaC,MAAb,CAAoBR,UAApB,EAA+BF,IAA/B,EAAoC,MAAI;AACpCW,EAAAA,OAAO,CAACC,GAAR,CAAY;AACRC,IAAAA,IAAI,EAAE,eADE;AAERb,IAAAA,IAFQ;AAGRE,IAAAA;AAHQ,GAAZ;AAKH,CAND;;AAOAH,GAAG,CAACW,MAAJ,CAAWT,QAAX,EAAoBD,IAApB,EAA0B,MAAI;AAC1BW,EAAAA,OAAO,CAACC,GAAR,CAAY;AACRC,IAAAA,IAAI,EAAE,YADE;AAERb,IAAAA,IAFQ;AAGRC,IAAAA;AAHQ,GAAZ;AAKH,CAND;AAQAF,GAAG,CAACe,GAAJ,CAAQ,OAAR,EAAgB,CAACC,GAAD,EAAKC,GAAL,KAAW;AACvBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,OAAX;AACH,CAFD",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/",
      "sourcesContent": [
        "const express = require('express');\nconst app = express();\nconst host = '0.0.0.0';\nconst httpPort = 3000;\nconst socketPort = 777;\nconst path = require('path');\n\nimport socketServer from './socket.io/index';\n\napp.use('/public', express.static(path.join(__dirname, 'public')))\napp.set('view engine', 'ejs');\napp.set('views', path.join(__dirname, '/views'));\nsocketServer.listen(socketPort,host,()=>{\n    console.log({\n        task: 'socket server',\n        host,\n        socketPort \n    });\n})\napp.listen(httpPort,host, ()=>{\n    console.log({\n        task: 'app server',\n        host,\n        httpPort \n    });\n});\n\napp.get('/game',(req,res)=>{\n    res.render('index');\n})\n\n\n\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1602667831388
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong",
      "filename": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst server = require(\"http\").createServer();\n\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24\n}); // io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\n\nconst rooms = [];\nio.on(\"connection\", socket => {\n  socket.on(\"joinRoom\", async ({\n    roomId,\n    side\n  }) => {\n    try {\n      let {\n        roomId\n      } = data;\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n\n      console.log({\n        rooms\n      }); // io.to(socket.id).emit('notifications', getNotifications);\n    } catch (error) {\n      console.log({\n        task: \"socket.io\",\n        error\n      });\n    }\n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      // console.log('data disconnect', data);\n      // console.log('room ', rooms[socket.placeId]);\n      console.log(\"disconnect, current room \", socket.roomId, \" \", rooms[socket.roomId]);\n      socket.leave(socket.roomId);\n\n      if (socket.roomId && rooms[socket.roomId]) {\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n\n      console.log(\"disconnect, update room \", socket.roomId, \" \", rooms[socket.roomId]);\n      console.log(\"room disconnect\");\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\nvar _default = server;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNlcnZlciIsInJlcXVpcmUiLCJjcmVhdGVTZXJ2ZXIiLCJpbyIsInNlcnZlQ2xpZW50IiwicGluZ0ludGVydmFsIiwicGluZ1RpbWVvdXQiLCJjb29raWUiLCJzZXRUaW1lb3V0Iiwicm9vbXMiLCJvbiIsInNvY2tldCIsInJvb21JZCIsInNpZGUiLCJkYXRhIiwidG9TdHJpbmciLCJqb2luIiwidW5kZWZpbmVkIiwiaW5kZXhPZiIsImlkIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsInRhc2siLCJsZWF2ZSIsInNwbGljZSIsImUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQVAsQ0FBZ0JDLFlBQWhCLEVBQWY7O0FBQ0EsTUFBTUMsRUFBRSxHQUFHRixPQUFPLENBQUMsV0FBRCxDQUFQLENBQXFCRCxNQUFyQixFQUE2QjtBQUN0QztBQUNBSSxFQUFBQSxXQUFXLEVBQUUsSUFGeUI7QUFHdEM7QUFDQUMsRUFBQUEsWUFBWSxFQUFFLEtBQUssRUFBTCxHQUFVLElBQVYsR0FBaUIsRUFKTztBQUt0Q0MsRUFBQUEsV0FBVyxFQUFFLEtBQUssRUFBTCxHQUFVLEVBTGU7QUFNdENDLEVBQUFBLE1BQU0sRUFBRSxLQU44QjtBQU90Q0MsRUFBQUEsVUFBVSxFQUFFLEtBQUssRUFBTCxHQUFVLElBQVYsR0FBaUI7QUFQUyxDQUE3QixDQUFYLEMsQ0FVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBLE1BQU1DLEtBQUssR0FBRyxFQUFkO0FBQ0FOLEVBQUUsQ0FBQ08sRUFBSCxDQUFNLFlBQU4sRUFBcUJDLE1BQUQsSUFBWTtBQUM5QkEsRUFBQUEsTUFBTSxDQUFDRCxFQUFQLENBQVUsVUFBVixFQUFzQixPQUFPO0FBQUNFLElBQUFBLE1BQUQ7QUFBU0MsSUFBQUE7QUFBVCxHQUFQLEtBQTBCO0FBQzlDLFFBQUk7QUFDRixVQUFJO0FBQUVELFFBQUFBO0FBQUYsVUFBYUUsSUFBakI7QUFDQUYsTUFBQUEsTUFBTSxHQUFHQSxNQUFNLENBQUNHLFFBQVAsRUFBVDtBQUNBSixNQUFBQSxNQUFNLENBQUNLLElBQVAsQ0FBWUosTUFBWjtBQUNBRCxNQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0JBLE1BQWhCOztBQUNBLFVBQUlILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUIsSUFBekIsSUFBaUNILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUJLLFNBQTlELEVBQXlFO0FBQ3ZFUixRQUFBQSxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLEdBQXVCLEVBQXZCO0FBQ0Q7O0FBQ0QsVUFBSUgsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQk0sT0FBckIsQ0FBNkJQLE1BQU0sQ0FBQ1EsRUFBcEMsTUFBNEMsQ0FBQyxDQUFqRCxFQUFvRDtBQUNsRFYsUUFBQUEsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQlEsSUFBckIsQ0FBMEJULE1BQU0sQ0FBQ1EsRUFBakM7QUFDRDs7QUFDREUsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFBQ2IsUUFBQUE7QUFBRCxPQUFaLEVBWEUsQ0FZRjtBQUNELEtBYkQsQ0FhRSxPQUFPYyxLQUFQLEVBQWM7QUFDZEYsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFBRUUsUUFBQUEsSUFBSSxFQUFFLFdBQVI7QUFBcUJELFFBQUFBO0FBQXJCLE9BQVo7QUFDRDtBQUNGLEdBakJEO0FBbUJBWixFQUFBQSxNQUFNLENBQUNELEVBQVAsQ0FBVSxZQUFWLEVBQXdCLFVBQVVJLElBQVYsRUFBZ0I7QUFDdEMsUUFBSTtBQUNGO0FBQ0E7QUFDQU8sTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQ0UsMkJBREYsRUFFRVgsTUFBTSxDQUFDQyxNQUZULEVBR0UsR0FIRixFQUlFSCxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUpQO0FBTUFELE1BQUFBLE1BQU0sQ0FBQ2MsS0FBUCxDQUFhZCxNQUFNLENBQUNDLE1BQXBCOztBQUNBLFVBQUlELE1BQU0sQ0FBQ0MsTUFBUCxJQUFpQkgsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBMUIsRUFBMkM7QUFDekNILFFBQUFBLEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsQ0FBcUJjLE1BQXJCLENBQTRCakIsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQk0sT0FBckIsQ0FBNkJQLE1BQU0sQ0FBQ1EsRUFBcEMsQ0FBNUIsRUFBcUUsQ0FBckU7QUFDRDs7QUFDREUsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQ0UsMEJBREYsRUFFRVgsTUFBTSxDQUFDQyxNQUZULEVBR0UsR0FIRixFQUlFSCxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUpQO0FBTUFTLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGlCQUFaO0FBQ0QsS0FwQkQsQ0FvQkUsT0FBT0ssQ0FBUCxFQUFVO0FBQ1ZOLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSyxDQUFaO0FBQ0Q7QUFDRixHQXhCRDtBQXlCRCxDQTdDRDtlQStDZTNCLE0iLCJzb3VyY2VSb290IjoiL21lZGlhL3RvYW5oMjYxMi9EYXRhMS9sZWFybi9FbWJlZGRlZCBzb2Z0d2FyZS9wcm9qZWN0L3BpbmctcG9uZy9zcmMvc29ja2V0LmlvLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNlcnZlciA9IHJlcXVpcmUoXCJodHRwXCIpLmNyZWF0ZVNlcnZlcigpO1xuY29uc3QgaW8gPSByZXF1aXJlKFwic29ja2V0LmlvXCIpKHNlcnZlciwge1xuICAvLyBwYXRoOiAnL3Rlc3QnLFxuICBzZXJ2ZUNsaWVudDogdHJ1ZSxcbiAgLy8gYmVsb3cgYXJlIGVuZ2luZS5JTyBvcHRpb25zXG4gIHBpbmdJbnRlcnZhbDogNjAgKiA2MCAqIDEwMDAgKiAyNCxcbiAgcGluZ1RpbWVvdXQ6IDYwICogNjAgKiAxMCxcbiAgY29va2llOiBmYWxzZSxcbiAgc2V0VGltZW91dDogNjAgKiA2MCAqIDEwMDAgKiAyNCxcbn0pO1xuXG4vLyBpby51c2UoZnVuY3Rpb24gKHNvY2tldCwgbmV4dCkge1xuLy8gICBjb25zdCB0b2tlbiA9XG4vLyAgICAgc29ja2V0LmhhbmRzaGFrZSAmJiBzb2NrZXQuaGFuZHNoYWtlLnF1ZXJ5ICYmIHNvY2tldC5oYW5kc2hha2UucXVlcnkudG9rZW5cbi8vICAgICAgID8gc29ja2V0LmhhbmRzaGFrZS5xdWVyeS50b2tlblxuLy8gICAgICAgOiBcIlwiO1xuXG4vLyAgIGp3dC52ZXJpZnkodG9rZW4sIENPTkZJR1tcIkpXVF9TRUNSRVRcIl0sIGZ1bmN0aW9uIChlcnJvciwgZGVjb2RlZCkge1xuLy8gICAgIGlmIChlcnJvcikge1xuLy8gICAgICAgcmVzcG9uc2VFcnJvclNvY2tldCh7XG4vLyAgICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4vLyAgICAgICAgIG1lc3NhZ2U6IFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0IFwiLFxuLy8gICAgICAgICBlcnJvcjogXCJVbmF1dGhlbnRpY2F0aWNlZCBzb2NrZXRcIixcbi8vICAgICAgIH0pO1xuLy8gICAgICAgc2V0VGltZW91dCgoKSA9PiBzb2NrZXQuZGlzY29ubmVjdCh0cnVlKSwgNTAwMCk7XG4vLyAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmF1dGhlbnRpY2F0aWNlZCBzb2NrZXRcIik7XG4vLyAgICAgfVxuLy8gICB9KTtcbi8vICAgbmV4dCgpO1xuLy8gfSk7XG5cbmNvbnN0IHJvb21zID0gW107XG5pby5vbihcImNvbm5lY3Rpb25cIiwgKHNvY2tldCkgPT4ge1xuICBzb2NrZXQub24oXCJqb2luUm9vbVwiLCBhc3luYyAoe3Jvb21JZCwgc2lkZX0pID0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IHsgcm9vbUlkIH0gPSBkYXRhO1xuICAgICAgcm9vbUlkID0gcm9vbUlkLnRvU3RyaW5nKCk7XG4gICAgICBzb2NrZXQuam9pbihyb29tSWQpO1xuICAgICAgc29ja2V0LnJvb21JZCA9IHJvb21JZDtcbiAgICAgIGlmIChyb29tc1tzb2NrZXQucm9vbUlkXSA9PT0gbnVsbCB8fCByb29tc1tzb2NrZXQucm9vbUlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJvb21zW3NvY2tldC5yb29tSWRdID0gW107XG4gICAgICB9XG4gICAgICBpZiAocm9vbXNbc29ja2V0LnJvb21JZF0uaW5kZXhPZihzb2NrZXQuaWQpID09PSAtMSkge1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXS5wdXNoKHNvY2tldC5pZCk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyh7cm9vbXN9KTtcbiAgICAgIC8vIGlvLnRvKHNvY2tldC5pZCkuZW1pdCgnbm90aWZpY2F0aW9ucycsIGdldE5vdGlmaWNhdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyh7IHRhc2s6IFwic29ja2V0LmlvXCIsIGVycm9yIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgc29ja2V0Lm9uKFwiZGlzY29ubmVjdFwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZGF0YSBkaXNjb25uZWN0JywgZGF0YSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygncm9vbSAnLCByb29tc1tzb2NrZXQucGxhY2VJZF0pO1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwiZGlzY29ubmVjdCwgY3VycmVudCByb29tIFwiLFxuICAgICAgICBzb2NrZXQucm9vbUlkLFxuICAgICAgICBcIiBcIixcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF1cbiAgICAgICk7XG4gICAgICBzb2NrZXQubGVhdmUoc29ja2V0LnJvb21JZCk7XG4gICAgICBpZiAoc29ja2V0LnJvb21JZCAmJiByb29tc1tzb2NrZXQucm9vbUlkXSkge1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXS5zcGxpY2Uocm9vbXNbc29ja2V0LnJvb21JZF0uaW5kZXhPZihzb2NrZXQuaWQpLCAxKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcImRpc2Nvbm5lY3QsIHVwZGF0ZSByb29tIFwiLFxuICAgICAgICBzb2NrZXQucm9vbUlkLFxuICAgICAgICBcIiBcIixcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF1cbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcInJvb20gZGlzY29ubmVjdFwiKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHNlcnZlcjsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "server",
        "require",
        "createServer",
        "io",
        "serveClient",
        "pingInterval",
        "pingTimeout",
        "cookie",
        "setTimeout",
        "rooms",
        "on",
        "socket",
        "roomId",
        "side",
        "data",
        "toString",
        "join",
        "undefined",
        "indexOf",
        "id",
        "push",
        "console",
        "log",
        "error",
        "task",
        "leave",
        "splice",
        "e"
      ],
      "mappings": "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",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/",
      "sourcesContent": [
        "const server = require(\"http\").createServer();\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24,\n});\n\n// io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\nconst rooms = [];\nio.on(\"connection\", (socket) => {\n  socket.on(\"joinRoom\", async ({roomId, side}) => {\n    try {\n      let { roomId } = data;\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n      console.log({rooms});\n      // io.to(socket.id).emit('notifications', getNotifications);\n    } catch (error) {\n      console.log({ task: \"socket.io\", error });\n    }\n  });\n\n  socket.on(\"disconnect\", function (data) {\n    try {\n      // console.log('data disconnect', data);\n      // console.log('room ', rooms[socket.placeId]);\n      console.log(\n        \"disconnect, current room \",\n        socket.roomId,\n        \" \",\n        rooms[socket.roomId]\n      );\n      socket.leave(socket.roomId);\n      if (socket.roomId && rooms[socket.roomId]) {\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n      console.log(\n        \"disconnect, update room \",\n        socket.roomId,\n        \" \",\n        rooms[socket.roomId]\n      );\n      console.log(\"room disconnect\");\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\n\nexport default server;"
      ]
    },
    "sourceType": "script",
    "mtime": 1602603858121
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded software/project/ping-pong\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong",
      "filename": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst server = require(\"http\").createServer();\n\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24\n}); // io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\n\nconst rooms = {};\nio.on(\"connection\", socket => {\n  socket.on(\"join-room\", async ({\n    roomId\n  }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n\n      console.log({\n        rooms\n      });\n    } catch (error) {\n      console.log({\n        task: \"socket.io\",\n        error\n      });\n    }\n  });\n  socket.on(\"device-to-server\", (side, x, y, z) => {\n    if (socket && socket.roomId) {\n      io.sockets.in(socket.roomId).emit(\"server-to-client\", {\n        side,\n        x,\n        y,\n        z\n      });\n    }\n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      // console.log('data disconnect', data);\n      // console.log('room ', rooms[socket.placeId]);\n      console.log(\"disconnect, current room \", socket.roomId, \" \", rooms[socket.roomId]);\n      socket.leave(socket.roomId);\n\n      if (socket.roomId && rooms[socket.roomId]) {\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n\n      console.log(\"disconnect, update room \", socket.roomId, \" \", rooms[socket.roomId]);\n      console.log(\"room disconnect\");\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\nvar _default = server;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNlcnZlciIsInJlcXVpcmUiLCJjcmVhdGVTZXJ2ZXIiLCJpbyIsInNlcnZlQ2xpZW50IiwicGluZ0ludGVydmFsIiwicGluZ1RpbWVvdXQiLCJjb29raWUiLCJzZXRUaW1lb3V0Iiwicm9vbXMiLCJvbiIsInNvY2tldCIsInJvb21JZCIsInRvU3RyaW5nIiwiam9pbiIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJpZCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJ0YXNrIiwic2lkZSIsIngiLCJ5IiwieiIsInNvY2tldHMiLCJpbiIsImVtaXQiLCJkYXRhIiwibGVhdmUiLCJzcGxpY2UiLCJlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFQLENBQWdCQyxZQUFoQixFQUFmOztBQUNBLE1BQU1DLEVBQUUsR0FBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBUCxDQUFxQkQsTUFBckIsRUFBNkI7QUFDdEM7QUFDQUksRUFBQUEsV0FBVyxFQUFFLElBRnlCO0FBR3RDO0FBQ0FDLEVBQUFBLFlBQVksRUFBRSxLQUFLLEVBQUwsR0FBVSxJQUFWLEdBQWlCLEVBSk87QUFLdENDLEVBQUFBLFdBQVcsRUFBRSxLQUFLLEVBQUwsR0FBVSxFQUxlO0FBTXRDQyxFQUFBQSxNQUFNLEVBQUUsS0FOOEI7QUFPdENDLEVBQUFBLFVBQVUsRUFBRSxLQUFLLEVBQUwsR0FBVSxJQUFWLEdBQWlCO0FBUFMsQ0FBN0IsQ0FBWCxDLENBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQSxNQUFNQyxLQUFLLEdBQUcsRUFBZDtBQUNBTixFQUFFLENBQUNPLEVBQUgsQ0FBTSxZQUFOLEVBQXFCQyxNQUFELElBQVk7QUFDOUJBLEVBQUFBLE1BQU0sQ0FBQ0QsRUFB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QyxNIiwic291cmNlUm9vdCI6Ii9tZWRpYS90b2FuaDI2MTIvRGF0YTEvbGVhcm4vRW1iZWRkZWQgc29mdHdhcmUvcHJvamVjdC9waW5nLXBvbmcvc3JjL3NvY2tldC5pby8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXJ2ZXIgPSByZXF1aXJlKFwiaHR0cFwiKS5jcmVhdGVTZXJ2ZXIoKTtcbmNvbnN0IGlvID0gcmVxdWlyZShcInNvY2tldC5pb1wiKShzZXJ2ZXIsIHtcbiAgLy8gcGF0aDogJy90ZXN0JyxcbiAgc2VydmVDbGllbnQ6IHRydWUsXG4gIC8vIGJlbG93IGFyZSBlbmdpbmUuSU8gb3B0aW9uc1xuICBwaW5nSW50ZXJ2YWw6IDYwICogNjAgKiAxMDAwICogMjQsXG4gIHBpbmdUaW1lb3V0OiA2MCAqIDYwICogMTAsXG4gIGNvb2tpZTogZmFsc2UsXG4gIHNldFRpbWVvdXQ6IDYwICogNjAgKiAxMDAwICogMjQsXG59KTtcblxuLy8gaW8udXNlKGZ1bmN0aW9uIChzb2NrZXQsIG5leHQpIHtcbi8vICAgY29uc3QgdG9rZW4gPVxuLy8gICAgIHNvY2tldC5oYW5kc2hha2UgJiYgc29ja2V0LmhhbmRzaGFrZS5xdWVyeSAmJiBzb2NrZXQuaGFuZHNoYWtlLnF1ZXJ5LnRva2VuXG4vLyAgICAgICA/IHNvY2tldC5oYW5kc2hha2UucXVlcnkudG9rZW5cbi8vICAgICAgIDogXCJcIjtcblxuLy8gICBqd3QudmVyaWZ5KHRva2VuLCBDT05GSUdbXCJKV1RfU0VDUkVUXCJdLCBmdW5jdGlvbiAoZXJyb3IsIGRlY29kZWQpIHtcbi8vICAgICBpZiAoZXJyb3IpIHtcbi8vICAgICAgIHJlc3BvbnNlRXJyb3JTb2NrZXQoe1xuLy8gICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuLy8gICAgICAgICBtZXNzYWdlOiBcIlVuYXV0aGVudGljYXRpY2VkIHNvY2tldCBcIixcbi8vICAgICAgICAgZXJyb3I6IFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIsXG4vLyAgICAgICB9KTtcbi8vICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc29ja2V0LmRpc2Nvbm5lY3QodHJ1ZSksIDUwMDApO1xuLy8gICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIpO1xuLy8gICAgIH1cbi8vICAgfSk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG5jb25zdCByb29tcyA9IHt9O1xuaW8ub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcbiAgc29ja2V0Lm9uKFwiam9pbi1yb29tXCIsIGFzeW5jICh7IHJvb21JZCB9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJvb21JZCA9IHJvb21JZC50b1N0cmluZygpO1xuICAgICAgc29ja2V0LmpvaW4ocm9vbUlkKTtcbiAgICAgIHNvY2tldC5yb29tSWQgPSByb29tSWQ7XG4gICAgICBpZiAocm9vbXNbc29ja2V0LnJvb21JZF0gPT09IG51bGwgfHwgcm9vbXNbc29ja2V0LnJvb21JZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXSA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSA9PT0gLTEpIHtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0ucHVzaChzb2NrZXQuaWQpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coeyByb29tcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coeyB0YXNrOiBcInNvY2tldC5pb1wiLCBlcnJvciB9KTtcbiAgICB9XG4gIH0pO1xuICBzb2NrZXQub24oXCJkZXZpY2UtdG8tc2VydmVyXCIsKHNpZGUseCx5LHopPT57XG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucm9vbUlkKXtcbiAgICAgIGlvLnNvY2tldHMuaW4oc29ja2V0LnJvb21JZCkuZW1pdChcInNlcnZlci10by1jbGllbnRcIiwoe3NpZGUsIHgseSx6fSkpO1xuICAgIH1cbiAgICBcbiAgfSk7XG4gIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2RhdGEgZGlzY29ubmVjdCcsIGRhdGEpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ3Jvb20gJywgcm9vbXNbc29ja2V0LnBsYWNlSWRdKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcImRpc2Nvbm5lY3QsIGN1cnJlbnQgcm9vbSBcIixcbiAgICAgICAgc29ja2V0LnJvb21JZCxcbiAgICAgICAgXCIgXCIsXG4gICAgICAgIHJvb21zW3NvY2tldC5yb29tSWRdXG4gICAgICApO1xuICAgICAgc29ja2V0LmxlYXZlKHNvY2tldC5yb29tSWQpO1xuICAgICAgaWYgKHNvY2tldC5yb29tSWQgJiYgcm9vbXNbc29ja2V0LnJvb21JZF0pIHtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0uc3BsaWNlKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSwgMSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJkaXNjb25uZWN0LCB1cGRhdGUgcm9vbSBcIixcbiAgICAgICAgc29ja2V0LnJvb21JZCxcbiAgICAgICAgXCIgXCIsXG4gICAgICAgIHJvb21zW3NvY2tldC5yb29tSWRdXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJyb29tIGRpc2Nvbm5lY3RcIik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzZXJ2ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "server",
        "require",
        "createServer",
        "io",
        "serveClient",
        "pingInterval",
        "pingTimeout",
        "cookie",
        "setTimeout",
        "rooms",
        "on",
        "socket",
        "roomId",
        "toString",
        "join",
        "undefined",
        "indexOf",
        "id",
        "push",
        "console",
        "log",
        "error",
        "task",
        "side",
        "x",
        "y",
        "z",
        "sockets",
        "in",
        "emit",
        "data",
        "leave",
        "splice",
        "e"
      ],
      "mappings": "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",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded software/project/ping-pong/src/socket.io/",
      "sourcesContent": [
        "const server = require(\"http\").createServer();\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24,\n});\n\n// io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\nconst rooms = {};\nio.on(\"connection\", (socket) => {\n  socket.on(\"join-room\", async ({ roomId }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n      console.log({ rooms });\n    } catch (error) {\n      console.log({ task: \"socket.io\", error });\n    }\n  });\n  socket.on(\"device-to-server\",(side,x,y,z)=>{\n    if (socket && socket.roomId){\n      io.sockets.in(socket.roomId).emit(\"server-to-client\",({side, x,y,z}));\n    }\n    \n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      // console.log('data disconnect', data);\n      // console.log('room ', rooms[socket.placeId]);\n      console.log(\n        \"disconnect, current room \",\n        socket.roomId,\n        \" \",\n        rooms[socket.roomId]\n      );\n      socket.leave(socket.roomId);\n      if (socket.roomId && rooms[socket.roomId]) {\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n      console.log(\n        \"disconnect, update room \",\n        socket.roomId,\n        \" \",\n        rooms[socket.roomId]\n      );\n      console.log(\"room disconnect\");\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\n\nexport default server;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1602671842057
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/app.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong",
      "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/app.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/app.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _index = _interopRequireDefault(require(\"./socket.io/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst express = require('express');\n\nconst app = express();\nconst host = '0.0.0.0';\nconst httpPort = 3000;\nconst socketPort = 777;\n\nconst path = require('path');\n\napp.use('/public', express.static(__dirname + '/public'));\napp.set('views', __dirname + '/views');\napp.set('view engine', 'ejs'); //extension of views\n\n_index.default.listen(socketPort, host, () => {\n  console.log({\n    task: 'socket server',\n    host,\n    socketPort\n  });\n});\n\napp.listen(httpPort, host, () => {\n  console.log({\n    task: 'app server',\n    host,\n    httpPort\n  });\n});\napp.get('/game', (req, res) => {\n  res.render('index');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImhvc3QiLCJodHRwUG9ydCIsInNvY2tldFBvcnQiLCJwYXRoIiwidXNlIiwic3RhdGljIiwiX19kaXJuYW1lIiwic2V0Iiwic29ja2V0U2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsInRhc2siLCJnZXQiLCJyZXEiLCJyZXMiLCJyZW5kZXIiXSwibWFwcGluZ3MiOiI7O0FBT0E7Ozs7QUFQQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXZCOztBQUNBLE1BQU1DLEdBQUcsR0FBR0YsT0FBTyxFQUFuQjtBQUNBLE1BQU1HLElBQUksR0FBRyxTQUFiO0FBQ0EsTUFBTUMsUUFBUSxHQUFHLElBQWpCO0FBQ0EsTUFBTUMsVUFBVSxHQUFHLEdBQW5COztBQUNBLE1BQU1DLElBQUksR0FBR0wsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBSUFDLEdBQUcsQ0FBQ0ssR0FBSixDQUFRLFNBQVIsRUFBa0JQLE9BQU8sQ0FBQ1EsTUFBUixDQUFlQyxTQUFTLEdBQUcsU0FBM0IsQ0FBbEI7QUFDQVAsR0FBRyxDQUFDUSxHQUFKLENBQVEsT0FBUixFQUFpQkQsU0FBUyxHQUFHLFFBQTdCO0FBQ0FQLEdBQUcsQ0FBQ1EsR0FBSixDQUFRLGFBQVIsRUFBdUIsS0FBdkIsRSxDQUErQjs7QUFFL0JDLGVBQWFDLE1BQWIsQ0FBb0JQLFVBQXBCLEVBQStCRixJQUEvQixFQUFvQyxNQUFJO0FBQ3BDVSxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWTtBQUNSQyxJQUFBQSxJQUFJLEVBQUUsZUFERTtBQUVSWixJQUFBQSxJQUZRO0FBR1JFLElBQUFBO0FBSFEsR0FBWjtBQUtILENBTkQ7O0FBT0FILEdBQUcsQ0FBQ1UsTUFBSixDQUFXUixRQUFYLEVBQW9CRCxJQUFwQixFQUEwQixNQUFJO0FBQzFCVSxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWTtBQUNSQyxJQUFBQSxJQUFJLEVBQUUsWUFERTtBQUVSWixJQUFBQSxJQUZRO0FBR1JDLElBQUFBO0FBSFEsR0FBWjtBQUtILENBTkQ7QUFRQUYsR0FBRyxDQUFDYyxHQUFKLENBQVEsT0FBUixFQUFnQixDQUFDQyxHQUFELEVBQUtDLEdBQUwsS0FBVztBQUN2QkEsRUFBQUEsR0FBRyxDQUFDQyxNQUFKLENBQVcsT0FBWDtBQUNILENBRkQiLCJzb3VyY2VSb290IjoiL21lZGlhL3RvYW5oMjYxMi9EYXRhMS9sZWFybi9FbWJlZGRlZF9zb2Z0d2FyZS9wcm9qZWN0L3BpbmctcG9uZy9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbmNvbnN0IGhvc3QgPSAnMC4wLjAuMCc7XG5jb25zdCBodHRwUG9ydCA9IDMwMDA7XG5jb25zdCBzb2NrZXRQb3J0ID0gNzc3O1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuaW1wb3J0IHNvY2tldFNlcnZlciBmcm9tICcuL3NvY2tldC5pby9pbmRleCc7XG5cbmFwcC51c2UoJy9wdWJsaWMnLGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArICcvcHVibGljJykpO1xuYXBwLnNldCgndmlld3MnLCBfX2Rpcm5hbWUgKyAnL3ZpZXdzJyk7XG5hcHAuc2V0KCd2aWV3IGVuZ2luZScsICdlanMnKTsgLy9leHRlbnNpb24gb2Ygdmlld3Ncblxuc29ja2V0U2VydmVyLmxpc3Rlbihzb2NrZXRQb3J0LGhvc3QsKCk9PntcbiAgICBjb25zb2xlLmxvZyh7XG4gICAgICAgIHRhc2s6ICdzb2NrZXQgc2VydmVyJyxcbiAgICAgICAgaG9zdCxcbiAgICAgICAgc29ja2V0UG9ydCBcbiAgICB9KTtcbn0pXG5hcHAubGlzdGVuKGh0dHBQb3J0LGhvc3QsICgpPT57XG4gICAgY29uc29sZS5sb2coe1xuICAgICAgICB0YXNrOiAnYXBwIHNlcnZlcicsXG4gICAgICAgIGhvc3QsXG4gICAgICAgIGh0dHBQb3J0IFxuICAgIH0pO1xufSk7XG5cbmFwcC5nZXQoJy9nYW1lJywocmVxLHJlcyk9PntcbiAgICByZXMucmVuZGVyKCdpbmRleCcpO1xufSlcblxuXG5cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "express",
        "require",
        "app",
        "host",
        "httpPort",
        "socketPort",
        "path",
        "use",
        "static",
        "__dirname",
        "set",
        "socketServer",
        "listen",
        "console",
        "log",
        "task",
        "get",
        "req",
        "res",
        "render"
      ],
      "mappings": ";;AAOA;;;;AAPA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,GAAG,GAAGF,OAAO,EAAnB;AACA,MAAMG,IAAI,GAAG,SAAb;AACA,MAAMC,QAAQ,GAAG,IAAjB;AACA,MAAMC,UAAU,GAAG,GAAnB;;AACA,MAAMC,IAAI,GAAGL,OAAO,CAAC,MAAD,CAApB;;AAIAC,GAAG,CAACK,GAAJ,CAAQ,SAAR,EAAkBP,OAAO,CAACQ,MAAR,CAAeC,SAAS,GAAG,SAA3B,CAAlB;AACAP,GAAG,CAACQ,GAAJ,CAAQ,OAAR,EAAiBD,SAAS,GAAG,QAA7B;AACAP,GAAG,CAACQ,GAAJ,CAAQ,aAAR,EAAuB,KAAvB,E,CAA+B;;AAE/BC,eAAaC,MAAb,CAAoBP,UAApB,EAA+BF,IAA/B,EAAoC,MAAI;AACpCU,EAAAA,OAAO,CAACC,GAAR,CAAY;AACRC,IAAAA,IAAI,EAAE,eADE;AAERZ,IAAAA,IAFQ;AAGRE,IAAAA;AAHQ,GAAZ;AAKH,CAND;;AAOAH,GAAG,CAACU,MAAJ,CAAWR,QAAX,EAAoBD,IAApB,EAA0B,MAAI;AAC1BU,EAAAA,OAAO,CAACC,GAAR,CAAY;AACRC,IAAAA,IAAI,EAAE,YADE;AAERZ,IAAAA,IAFQ;AAGRC,IAAAA;AAHQ,GAAZ;AAKH,CAND;AAQAF,GAAG,CAACc,GAAJ,CAAQ,OAAR,EAAgB,CAACC,GAAD,EAAKC,GAAL,KAAW;AACvBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,OAAX;AACH,CAFD",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/",
      "sourcesContent": [
        "const express = require('express');\nconst app = express();\nconst host = '0.0.0.0';\nconst httpPort = 3000;\nconst socketPort = 777;\nconst path = require('path');\n\nimport socketServer from './socket.io/index';\n\napp.use('/public',express.static(__dirname + '/public'));\napp.set('views', __dirname + '/views');\napp.set('view engine', 'ejs'); //extension of views\n\nsocketServer.listen(socketPort,host,()=>{\n    console.log({\n        task: 'socket server',\n        host,\n        socketPort \n    });\n})\napp.listen(httpPort,host, ()=>{\n    console.log({\n        task: 'app server',\n        host,\n        httpPort \n    });\n});\n\napp.get('/game',(req,res)=>{\n    res.render('index');\n})\n\n\n\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1602694584971
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong",
      "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst server = require(\"http\").createServer();\n\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24\n}); // io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\n\nconst rooms = {};\nio.on(\"connection\", socket => {\n  socket.on(\"join-room\", async ({\n    roomId\n  }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n\n      console.log({\n        rooms\n      });\n    } catch (error) {\n      console.log({\n        task: \"socket.io\",\n        error\n      });\n    }\n  });\n  socket.on(\"device-to-server\", (side, x, y, z) => {\n    if (socket && socket.roomId) {\n      io.sockets.in(socket.roomId).emit(\"server-to-client\", {\n        side,\n        x,\n        y,\n        z\n      });\n    }\n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      // console.log('data disconnect', data);\n      // console.log('room ', rooms[socket.placeId]);\n      console.log(\"disconnect, current room \", socket.roomId, \" \", rooms[socket.roomId]);\n      socket.leave(socket.roomId);\n\n      if (socket.roomId && rooms[socket.roomId]) {\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n\n      console.log(\"disconnect, update room \", socket.roomId, \" \", rooms[socket.roomId]);\n      console.log(\"room disconnect\");\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\nvar _default = server;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNlcnZlciIsInJlcXVpcmUiLCJjcmVhdGVTZXJ2ZXIiLCJpbyIsInNlcnZlQ2xpZW50IiwicGluZ0ludGVydmFsIiwicGluZ1RpbWVvdXQiLCJjb29raWUiLCJzZXRUaW1lb3V0Iiwicm9vbXMiLCJvbiIsInNvY2tldCIsInJvb21JZCIsInRvU3RyaW5nIiwiam9pbiIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJpZCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJ0YXNrIiwic2lkZSIsIngiLCJ5IiwieiIsInNvY2tldHMiLCJpbiIsImVtaXQiLCJkYXRhIiwibGVhdmUiLCJzcGxpY2UiLCJlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFQLENBQWdCQyxZQUFoQixFQUFmOztBQUNBLE1BQU1DLEVBQUUsR0FBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBUCxDQUFxQkQsTUFBckIsRUFBNkI7QUFDdEM7QUFDQUksRUFBQUEsV0FBVyxFQUFFLElBRnlCO0FBR3RDO0FBQ0FDLEVBQUFBLFlBQVksRUFBRSxLQUFLLEVBQUwsR0FBVSxJQUFWLEdBQWlCLEVBSk87QUFLdENDLEVBQUFBLFdBQVcsRUFBRSxLQUFLLEVBQUwsR0FBVSxFQUxlO0FBTXRDQyxFQUFBQSxNQUFNLEVBQUUsS0FOOEI7QUFPdENDLEVBQUFBLFVBQVUsRUFBRSxLQUFLLEVBQUwsR0FBVSxJQUFWLEdBQWlCO0FBUFMsQ0FBN0IsQ0FBWCxDLENBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQSxNQUFNQyxLQUFLLEdBQUcsRUFBZDtBQUNBTixFQUFFLENBQUNPLEVBQUgsQ0FBTSxZQUFOLEVBQXFCQyxNQUFELElBQVk7QUFDOUJBLEVBQUFBLE1BQU0sQ0FBQ0QsRUFB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QyxNIiwic291cmNlUm9vdCI6Ii9tZWRpYS90b2FuaDI2MTIvRGF0YTEvbGVhcm4vRW1iZWRkZWRfc29mdHdhcmUvcHJvamVjdC9waW5nLXBvbmcvc3JjL3NvY2tldC5pby8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXJ2ZXIgPSByZXF1aXJlKFwiaHR0cFwiKS5jcmVhdGVTZXJ2ZXIoKTtcbmNvbnN0IGlvID0gcmVxdWlyZShcInNvY2tldC5pb1wiKShzZXJ2ZXIsIHtcbiAgLy8gcGF0aDogJy90ZXN0JyxcbiAgc2VydmVDbGllbnQ6IHRydWUsXG4gIC8vIGJlbG93IGFyZSBlbmdpbmUuSU8gb3B0aW9uc1xuICBwaW5nSW50ZXJ2YWw6IDYwICogNjAgKiAxMDAwICogMjQsXG4gIHBpbmdUaW1lb3V0OiA2MCAqIDYwICogMTAsXG4gIGNvb2tpZTogZmFsc2UsXG4gIHNldFRpbWVvdXQ6IDYwICogNjAgKiAxMDAwICogMjQsXG59KTtcblxuLy8gaW8udXNlKGZ1bmN0aW9uIChzb2NrZXQsIG5leHQpIHtcbi8vICAgY29uc3QgdG9rZW4gPVxuLy8gICAgIHNvY2tldC5oYW5kc2hha2UgJiYgc29ja2V0LmhhbmRzaGFrZS5xdWVyeSAmJiBzb2NrZXQuaGFuZHNoYWtlLnF1ZXJ5LnRva2VuXG4vLyAgICAgICA/IHNvY2tldC5oYW5kc2hha2UucXVlcnkudG9rZW5cbi8vICAgICAgIDogXCJcIjtcblxuLy8gICBqd3QudmVyaWZ5KHRva2VuLCBDT05GSUdbXCJKV1RfU0VDUkVUXCJdLCBmdW5jdGlvbiAoZXJyb3IsIGRlY29kZWQpIHtcbi8vICAgICBpZiAoZXJyb3IpIHtcbi8vICAgICAgIHJlc3BvbnNlRXJyb3JTb2NrZXQoe1xuLy8gICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuLy8gICAgICAgICBtZXNzYWdlOiBcIlVuYXV0aGVudGljYXRpY2VkIHNvY2tldCBcIixcbi8vICAgICAgICAgZXJyb3I6IFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIsXG4vLyAgICAgICB9KTtcbi8vICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc29ja2V0LmRpc2Nvbm5lY3QodHJ1ZSksIDUwMDApO1xuLy8gICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIpO1xuLy8gICAgIH1cbi8vICAgfSk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG5jb25zdCByb29tcyA9IHt9O1xuaW8ub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcbiAgc29ja2V0Lm9uKFwiam9pbi1yb29tXCIsIGFzeW5jICh7IHJvb21JZCB9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJvb21JZCA9IHJvb21JZC50b1N0cmluZygpO1xuICAgICAgc29ja2V0LmpvaW4ocm9vbUlkKTtcbiAgICAgIHNvY2tldC5yb29tSWQgPSByb29tSWQ7XG4gICAgICBpZiAocm9vbXNbc29ja2V0LnJvb21JZF0gPT09IG51bGwgfHwgcm9vbXNbc29ja2V0LnJvb21JZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXSA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSA9PT0gLTEpIHtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0ucHVzaChzb2NrZXQuaWQpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coeyByb29tcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coeyB0YXNrOiBcInNvY2tldC5pb1wiLCBlcnJvciB9KTtcbiAgICB9XG4gIH0pO1xuICBzb2NrZXQub24oXCJkZXZpY2UtdG8tc2VydmVyXCIsKHNpZGUseCx5LHopPT57XG4gICAgaWYgKHNvY2tldCAmJiBzb2NrZXQucm9vbUlkKXtcbiAgICAgIGlvLnNvY2tldHMuaW4oc29ja2V0LnJvb21JZCkuZW1pdChcInNlcnZlci10by1jbGllbnRcIiwoe3NpZGUsIHgseSx6fSkpO1xuICAgIH1cbiAgICBcbiAgfSk7XG4gIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2RhdGEgZGlzY29ubmVjdCcsIGRhdGEpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ3Jvb20gJywgcm9vbXNbc29ja2V0LnBsYWNlSWRdKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcImRpc2Nvbm5lY3QsIGN1cnJlbnQgcm9vbSBcIixcbiAgICAgICAgc29ja2V0LnJvb21JZCxcbiAgICAgICAgXCIgXCIsXG4gICAgICAgIHJvb21zW3NvY2tldC5yb29tSWRdXG4gICAgICApO1xuICAgICAgc29ja2V0LmxlYXZlKHNvY2tldC5yb29tSWQpO1xuICAgICAgaWYgKHNvY2tldC5yb29tSWQgJiYgcm9vbXNbc29ja2V0LnJvb21JZF0pIHtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0uc3BsaWNlKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSwgMSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJkaXNjb25uZWN0LCB1cGRhdGUgcm9vbSBcIixcbiAgICAgICAgc29ja2V0LnJvb21JZCxcbiAgICAgICAgXCIgXCIsXG4gICAgICAgIHJvb21zW3NvY2tldC5yb29tSWRdXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJyb29tIGRpc2Nvbm5lY3RcIik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzZXJ2ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "server",
        "require",
        "createServer",
        "io",
        "serveClient",
        "pingInterval",
        "pingTimeout",
        "cookie",
        "setTimeout",
        "rooms",
        "on",
        "socket",
        "roomId",
        "toString",
        "join",
        "undefined",
        "indexOf",
        "id",
        "push",
        "console",
        "log",
        "error",
        "task",
        "side",
        "x",
        "y",
        "z",
        "sockets",
        "in",
        "emit",
        "data",
        "leave",
        "splice",
        "e"
      ],
      "mappings": "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",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/",
      "sourcesContent": [
        "const server = require(\"http\").createServer();\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24,\n});\n\n// io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\nconst rooms = {};\nio.on(\"connection\", (socket) => {\n  socket.on(\"join-room\", async ({ roomId }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n      console.log({ rooms });\n    } catch (error) {\n      console.log({ task: \"socket.io\", error });\n    }\n  });\n  socket.on(\"device-to-server\",(side,x,y,z)=>{\n    if (socket && socket.roomId){\n      io.sockets.in(socket.roomId).emit(\"server-to-client\",({side, x,y,z}));\n    }\n    \n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      // console.log('data disconnect', data);\n      // console.log('room ', rooms[socket.placeId]);\n      console.log(\n        \"disconnect, current room \",\n        socket.roomId,\n        \" \",\n        rooms[socket.roomId]\n      );\n      socket.leave(socket.roomId);\n      if (socket.roomId && rooms[socket.roomId]) {\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n      console.log(\n        \"disconnect, update room \",\n        socket.roomId,\n        \" \",\n        rooms[socket.roomId]\n      );\n      console.log(\"room disconnect\");\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\n\nexport default server;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1602671842057
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong",
      "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst server = require(\"http\").createServer();\n\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24\n}); // io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\n\nconst rooms = {};\nio.on(\"connection\", socket => {\n  socket.on(\"join-room\", async ({\n    roomId\n  }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n\n      console.log({\n        rooms\n      });\n    } catch (error) {\n      console.log({\n        task: \"socket.io\",\n        error\n      });\n    }\n  });\n  socket.on(\"device-to-server\", data => {\n    if (data && data.roomId) {\n      console.log(data);\n      data.roomId = data.roomId.toString();\n      io.sockets.in(data.roomId).emit(\"server-to-client\", data); // io.to(data.roomId).emit(\"server-to-client\",data);\n    }\n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      socket.leave(socket.roomId);\n\n      if (socket.roomId && rooms[socket.roomId]) {\n        console.log({\n          event: 'disconnect',\n          roomId: socket.roomId,\n          client: socket.id\n        });\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\nvar _default = server;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNlcnZlciIsInJlcXVpcmUiLCJjcmVhdGVTZXJ2ZXIiLCJpbyIsInNlcnZlQ2xpZW50IiwicGluZ0ludGVydmFsIiwicGluZ1RpbWVvdXQiLCJjb29raWUiLCJzZXRUaW1lb3V0Iiwicm9vbXMiLCJvbiIsInNvY2tldCIsInJvb21JZCIsInRvU3RyaW5nIiwiam9pbiIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJpZCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJ0YXNrIiwiZGF0YSIsInNvY2tldHMiLCJpbiIsImVtaXQiLCJsZWF2ZSIsImV2ZW50IiwiY2xpZW50Iiwic3BsaWNlIiwiZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBUCxDQUFnQkMsWUFBaEIsRUFBZjs7QUFDQSxNQUFNQyxFQUFFLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQVAsQ0FBcUJELE1BQXJCLEVBQTZCO0FBQ3RDO0FBQ0FJLEVBQUFBLFdBQVcsRUFBRSxJQUZ5QjtBQUd0QztBQUNBQyxFQUFBQSxZQUFZLEVBQUUsS0FBSyxFQUFMLEdBQVUsSUFBVixHQUFpQixFQUpPO0FBS3RDQyxFQUFBQSxXQUFXLEVBQUUsS0FBSyxFQUFMLEdBQVUsRUFMZTtBQU10Q0MsRUFBQUEsTUFBTSxFQUFFLEtBTjhCO0FBT3RDQyxFQUFBQSxVQUFVLEVBQUUsS0FBSyxFQUFMLEdBQVUsSUFBVixHQUFpQjtBQVBTLENBQTdCLENBQVgsQyxDQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUEsTUFBTUMsS0FBSyxHQUFHLEVBQWQ7QUFDQU4sRUFBRSxDQUFDTyxFQUFILENBQU0sWUFBTixFQUFxQkMsTUFBRCxJQUFZO0FBQzlCQSxFQUFBQSxNQUFNLENBQUNELEVBQVAsQ0FBVSxXQUFWLEVBQXVCLE9BQU87QUFBRUUsSUFBQUE7QUFBRixHQUFQLEtBQXNCO0FBQzNDLFFBQUk7QUFDRkEsTUFBQUEsTUFBTSxHQUFHQSxNQUFNLENBQUNDLFFBQVAsRUFBVDtBQUNBRixNQUFBQSxNQUFNLENBQUNHLElBQVAsQ0FBWUYsTUFBWjtBQUNBRCxNQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0JBLE1BQWhCOztBQUNBLFVBQUlILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUIsSUFBekIsSUFBaUNILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUJHLFNBQTlELEVBQXlFO0FBQ3ZFTixRQUFBQSxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLEdBQXVCLEVBQXZCO0FBQ0Q7O0FBQ0QsVUFBSUgsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQkksT0FBckIsQ0FBNkJMLE1BQU0sQ0FBQ00sRUFBcEMsTUFBNEMsQ0FBQyxDQUFqRCxFQUFvRDtBQUNsRFIsUUFBQUEsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQk0sSUFBckIsQ0FBMEJQLE1BQU0sQ0FBQ00sRUFBakM7QUFDRDs7QUFDREUsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFBRVgsUUFBQUE7QUFBRixPQUFaO0FBQ0QsS0FYRCxDQVdFLE9BQU9ZLEtBQVAsRUFBYztBQUNkRixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWTtBQUFFRSxRQUFBQSxJQUFJLEVBQUUsV0FBUjtBQUFxQkQsUUFBQUE7QUFBckIsT0FBWjtBQUNEO0FBQ0YsR0FmRDtBQWdCQVYsRUFBQUEsTUFBTSxDQUFDRCxFQUFQLENBQVUsa0JBQVYsRUFBOEJhLElBQUQsSUFBUTtBQUNuQyxRQUFJQSxJQUFJLElBQUlBLElBQUksQ0FBQ1gsTUFBakIsRUFBd0I7QUFDdEJPLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRyxJQUFaO0FBQ0FBLE1BQUFBLElBQUksQ0FBQ1gsTUFBTCxHQUFjVyxJQUFJLENBQUNYLE1BQUwsQ0FBWUMsUUFBWixFQUFkO0FBQ0FWLE1BQUFBLEVBQUUsQ0FBQ3FCLE9BQUgsQ0FBV0MsRUFBWCxDQUFjRixJQUFJLENBQUNYLE1BQW5CLEVBQTJCYyxJQUEzQixDQUFnQyxrQkFBaEMsRUFBbURILElBQW5ELEVBSHNCLENBSXRCO0FBQ0Q7QUFFRixHQVJEO0FBU0FaLEVBQUFBLE1BQU0sQ0FBQ0QsRUFBUCxDQUFVLFlBQVYsRUFBd0IsVUFBVWEsSUFBVixFQUFnQjtBQUN0QyxRQUFJO0FBQ0ZaLE1BQUFBLE1BQU0sQ0FBQ2dCLEtBQVAsQ0FBYWhCLE1BQU0sQ0FBQ0MsTUFBcEI7O0FBQ0EsVUFBSUQsTUFBTSxDQUFDQyxNQUFQLElBQWlCSCxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUExQixFQUEyQztBQUN6Q08sUUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFDVlEsVUFBQUEsS0FBSyxFQUFFLFlBREc7QUFFVmhCLFVBQUFBLE1BQU0sRUFBRUQsTUFBTSxDQUFDQyxNQUZMO0FBR1ZpQixVQUFBQSxNQUFNLEVBQUVsQixNQUFNLENBQUNNO0FBSEwsU0FBWjtBQUtBUixRQUFBQSxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLENBQXFCa0IsTUFBckIsQ0FBNEJyQixLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLENBQXFCSSxPQUFyQixDQUE2QkwsTUFBTSxDQUFDTSxFQUFwQyxDQUE1QixFQUFxRSxDQUFyRTtBQUNEO0FBRUYsS0FYRCxDQVdFLE9BQU9jLENBQVAsRUFBVTtBQUNWWixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWVcsQ0FBWjtBQUNEO0FBQ0YsR0FmRDtBQWdCRCxDQTFDRDtlQTRDZS9CLE0iLCJzb3VyY2VSb290IjoiL21lZGlhL3RvYW5oMjYxMi9EYXRhMS9sZWFybi9FbWJlZGRlZF9zb2Z0d2FyZS9wcm9qZWN0L3BpbmctcG9uZy9zcmMvc29ja2V0LmlvLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNlcnZlciA9IHJlcXVpcmUoXCJodHRwXCIpLmNyZWF0ZVNlcnZlcigpO1xuY29uc3QgaW8gPSByZXF1aXJlKFwic29ja2V0LmlvXCIpKHNlcnZlciwge1xuICAvLyBwYXRoOiAnL3Rlc3QnLFxuICBzZXJ2ZUNsaWVudDogdHJ1ZSxcbiAgLy8gYmVsb3cgYXJlIGVuZ2luZS5JTyBvcHRpb25zXG4gIHBpbmdJbnRlcnZhbDogNjAgKiA2MCAqIDEwMDAgKiAyNCxcbiAgcGluZ1RpbWVvdXQ6IDYwICogNjAgKiAxMCxcbiAgY29va2llOiBmYWxzZSxcbiAgc2V0VGltZW91dDogNjAgKiA2MCAqIDEwMDAgKiAyNCxcbn0pO1xuXG4vLyBpby51c2UoZnVuY3Rpb24gKHNvY2tldCwgbmV4dCkge1xuLy8gICBjb25zdCB0b2tlbiA9XG4vLyAgICAgc29ja2V0LmhhbmRzaGFrZSAmJiBzb2NrZXQuaGFuZHNoYWtlLnF1ZXJ5ICYmIHNvY2tldC5oYW5kc2hha2UucXVlcnkudG9rZW5cbi8vICAgICAgID8gc29ja2V0LmhhbmRzaGFrZS5xdWVyeS50b2tlblxuLy8gICAgICAgOiBcIlwiO1xuXG4vLyAgIGp3dC52ZXJpZnkodG9rZW4sIENPTkZJR1tcIkpXVF9TRUNSRVRcIl0sIGZ1bmN0aW9uIChlcnJvciwgZGVjb2RlZCkge1xuLy8gICAgIGlmIChlcnJvcikge1xuLy8gICAgICAgcmVzcG9uc2VFcnJvclNvY2tldCh7XG4vLyAgICAgICAgIHNvY2tldElkOiBzb2NrZXQuaWQsXG4vLyAgICAgICAgIG1lc3NhZ2U6IFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0IFwiLFxuLy8gICAgICAgICBlcnJvcjogXCJVbmF1dGhlbnRpY2F0aWNlZCBzb2NrZXRcIixcbi8vICAgICAgIH0pO1xuLy8gICAgICAgc2V0VGltZW91dCgoKSA9PiBzb2NrZXQuZGlzY29ubmVjdCh0cnVlKSwgNTAwMCk7XG4vLyAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmF1dGhlbnRpY2F0aWNlZCBzb2NrZXRcIik7XG4vLyAgICAgfVxuLy8gICB9KTtcbi8vICAgbmV4dCgpO1xuLy8gfSk7XG5cbmNvbnN0IHJvb21zID0ge307XG5pby5vbihcImNvbm5lY3Rpb25cIiwgKHNvY2tldCkgPT4ge1xuICBzb2NrZXQub24oXCJqb2luLXJvb21cIiwgYXN5bmMgKHsgcm9vbUlkIH0pID0+IHtcbiAgICB0cnkge1xuICAgICAgcm9vbUlkID0gcm9vbUlkLnRvU3RyaW5nKCk7XG4gICAgICBzb2NrZXQuam9pbihyb29tSWQpO1xuICAgICAgc29ja2V0LnJvb21JZCA9IHJvb21JZDtcbiAgICAgIGlmIChyb29tc1tzb2NrZXQucm9vbUlkXSA9PT0gbnVsbCB8fCByb29tc1tzb2NrZXQucm9vbUlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJvb21zW3NvY2tldC5yb29tSWRdID0gW107XG4gICAgICB9XG4gICAgICBpZiAocm9vbXNbc29ja2V0LnJvb21JZF0uaW5kZXhPZihzb2NrZXQuaWQpID09PSAtMSkge1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXS5wdXNoKHNvY2tldC5pZCk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyh7IHJvb21zIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyh7IHRhc2s6IFwic29ja2V0LmlvXCIsIGVycm9yIH0pO1xuICAgIH1cbiAgfSk7XG4gIHNvY2tldC5vbihcImRldmljZS10by1zZXJ2ZXJcIiwoZGF0YSk9PntcbiAgICBpZiAoZGF0YSAmJiBkYXRhLnJvb21JZCl7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgZGF0YS5yb29tSWQgPSBkYXRhLnJvb21JZC50b1N0cmluZygpO1xuICAgICAgaW8uc29ja2V0cy5pbihkYXRhLnJvb21JZCkuZW1pdChcInNlcnZlci10by1jbGllbnRcIixkYXRhKTtcbiAgICAgIC8vIGlvLnRvKGRhdGEucm9vbUlkKS5lbWl0KFwic2VydmVyLXRvLWNsaWVudFwiLGRhdGEpO1xuICAgIH1cbiAgICBcbiAgfSk7XG4gIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgc29ja2V0LmxlYXZlKHNvY2tldC5yb29tSWQpO1xuICAgICAgaWYgKHNvY2tldC5yb29tSWQgJiYgcm9vbXNbc29ja2V0LnJvb21JZF0pIHtcbiAgICAgICAgY29uc29sZS5sb2coe1xuICAgICAgICAgIGV2ZW50OiAnZGlzY29ubmVjdCcsXG4gICAgICAgICAgcm9vbUlkOiBzb2NrZXQucm9vbUlkLFxuICAgICAgICAgIGNsaWVudDogc29ja2V0LmlkXG4gICAgICAgIH0pO1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXS5zcGxpY2Uocm9vbXNbc29ja2V0LnJvb21JZF0uaW5kZXhPZihzb2NrZXQuaWQpLCAxKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgc2VydmVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "server",
        "require",
        "createServer",
        "io",
        "serveClient",
        "pingInterval",
        "pingTimeout",
        "cookie",
        "setTimeout",
        "rooms",
        "on",
        "socket",
        "roomId",
        "toString",
        "join",
        "undefined",
        "indexOf",
        "id",
        "push",
        "console",
        "log",
        "error",
        "task",
        "data",
        "sockets",
        "in",
        "emit",
        "leave",
        "event",
        "client",
        "splice",
        "e"
      ],
      "mappings": "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",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong/src/socket.io/",
      "sourcesContent": [
        "const server = require(\"http\").createServer();\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24,\n});\n\n// io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\nconst rooms = {};\nio.on(\"connection\", (socket) => {\n  socket.on(\"join-room\", async ({ roomId }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n      console.log({ rooms });\n    } catch (error) {\n      console.log({ task: \"socket.io\", error });\n    }\n  });\n  socket.on(\"device-to-server\",(data)=>{\n    if (data && data.roomId){\n      console.log(data)\n      data.roomId = data.roomId.toString();\n      io.sockets.in(data.roomId).emit(\"server-to-client\",data);\n      // io.to(data.roomId).emit(\"server-to-client\",data);\n    }\n    \n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      socket.leave(socket.roomId);\n      if (socket.roomId && rooms[socket.roomId]) {\n        console.log({\n          event: 'disconnect',\n          roomId: socket.roomId,\n          client: socket.id\n        });\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\n\nexport default server;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1602749146826
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/app.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps",
      "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/app.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/app.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _index = _interopRequireDefault(require(\"./socket.io/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst express = require('express');\n\nconst app = express();\nconst host = '0.0.0.0';\nconst httpPort = 3000;\nconst socketPort = 777;\n\nconst path = require('path');\n\napp.use('/public', express.static(__dirname + '/public'));\napp.set('views', path.resolve(process.cwd(), 'src', 'views'));\napp.set('view engine', 'ejs'); //extension of views\n\n_index.default.listen(socketPort, host, () => {\n  console.log({\n    task: 'socket server',\n    host,\n    socketPort\n  });\n});\n\napp.listen(httpPort, host, () => {\n  console.log({\n    task: 'app server',\n    host,\n    httpPort\n  });\n});\napp.get('/game', (req, res) => {\n  res.render('index');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImhvc3QiLCJodHRwUG9ydCIsInNvY2tldFBvcnQiLCJwYXRoIiwidXNlIiwic3RhdGljIiwiX19kaXJuYW1lIiwic2V0IiwicmVzb2x2ZSIsInByb2Nlc3MiLCJjd2QiLCJzb2NrZXRTZXJ2ZXIiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwidGFzayIsImdldCIsInJlcSIsInJlcyIsInJlbmRlciJdLCJtYXBwaW5ncyI6Ijs7QUFPQTs7OztBQVBBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHRixPQUFPLEVBQW5CO0FBQ0EsTUFBTUcsSUFBSSxHQUFHLFNBQWI7QUFDQSxNQUFNQyxRQUFRLEdBQUcsSUFBakI7QUFDQSxNQUFNQyxVQUFVLEdBQUcsR0FBbkI7O0FBQ0EsTUFBTUMsSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFJQUMsR0FBRyxDQUFDSyxHQUFKLENBQVEsU0FBUixFQUFrQlAsT0FBTyxDQUFDUSxNQUFSLENBQWVDLFNBQVMsR0FBRyxTQUEzQixDQUFsQjtBQUNBUCxHQUFHLENBQUNRLEdBQUosQ0FBUSxPQUFSLEVBQWlCSixJQUFJLENBQUNLLE9BQUwsQ0FBYUMsT0FBTyxDQUFDQyxHQUFSLEVBQWIsRUFBMkIsS0FBM0IsRUFBaUMsT0FBakMsQ0FBakI7QUFDQVgsR0FBRyxDQUFDUSxHQUFKLENBQVEsYUFBUixFQUF1QixLQUF2QixFLENBQStCOztBQUUvQkksZUFBYUMsTUFBYixDQUFvQlYsVUFBcEIsRUFBK0JGLElBQS9CLEVBQW9DLE1BQUk7QUFDcENhLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZO0FBQ1JDLElBQUFBLElBQUksRUFBRSxlQURFO0FBRVJmLElBQUFBLElBRlE7QUFHUkUsSUFBQUE7QUFIUSxHQUFaO0FBS0gsQ0FORDs7QUFPQUgsR0FBRyxDQUFDYSxNQUFKLENBQVdYLFFBQVgsRUFBb0JELElBQXBCLEVBQTBCLE1BQUk7QUFDMUJhLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZO0FBQ1JDLElBQUFBLElBQUksRUFBRSxZQURFO0FBRVJmLElBQUFBLElBRlE7QUFHUkMsSUFBQUE7QUFIUSxHQUFaO0FBS0gsQ0FORDtBQVFBRixHQUFHLENBQUNpQixHQUFKLENBQVEsT0FBUixFQUFnQixDQUFDQyxHQUFELEVBQUtDLEdBQUwsS0FBVztBQUN2QkEsRUFBQUEsR0FBRyxDQUFDQyxNQUFKLENBQVcsT0FBWDtBQUNILENBRkQiLCJzb3VyY2VSb290IjoiL21lZGlhL3RvYW5oMjYxMi9EYXRhMS9sZWFybi9FbWJlZGRlZF9zb2Z0d2FyZS9wcm9qZWN0L3BpbmctcG9uZy12cHMvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBob3N0ID0gJzAuMC4wLjAnO1xuY29uc3QgaHR0cFBvcnQgPSAzMDAwO1xuY29uc3Qgc29ja2V0UG9ydCA9IDc3NztcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmltcG9ydCBzb2NrZXRTZXJ2ZXIgZnJvbSAnLi9zb2NrZXQuaW8vaW5kZXgnO1xuXG5hcHAudXNlKCcvcHVibGljJyxleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyAnL3B1YmxpYycpKTtcbmFwcC5zZXQoJ3ZpZXdzJywgcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksJ3NyYycsJ3ZpZXdzJykpO1xuYXBwLnNldCgndmlldyBlbmdpbmUnLCAnZWpzJyk7IC8vZXh0ZW5zaW9uIG9mIHZpZXdzXG5cbnNvY2tldFNlcnZlci5saXN0ZW4oc29ja2V0UG9ydCxob3N0LCgpPT57XG4gICAgY29uc29sZS5sb2coe1xuICAgICAgICB0YXNrOiAnc29ja2V0IHNlcnZlcicsXG4gICAgICAgIGhvc3QsXG4gICAgICAgIHNvY2tldFBvcnQgXG4gICAgfSk7XG59KVxuYXBwLmxpc3RlbihodHRwUG9ydCxob3N0LCAoKT0+e1xuICAgIGNvbnNvbGUubG9nKHtcbiAgICAgICAgdGFzazogJ2FwcCBzZXJ2ZXInLFxuICAgICAgICBob3N0LFxuICAgICAgICBodHRwUG9ydCBcbiAgICB9KTtcbn0pO1xuXG5hcHAuZ2V0KCcvZ2FtZScsKHJlcSxyZXMpPT57XG4gICAgcmVzLnJlbmRlcignaW5kZXgnKTtcbn0pXG5cblxuXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "express",
        "require",
        "app",
        "host",
        "httpPort",
        "socketPort",
        "path",
        "use",
        "static",
        "__dirname",
        "set",
        "resolve",
        "process",
        "cwd",
        "socketServer",
        "listen",
        "console",
        "log",
        "task",
        "get",
        "req",
        "res",
        "render"
      ],
      "mappings": ";;AAOA;;;;AAPA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,GAAG,GAAGF,OAAO,EAAnB;AACA,MAAMG,IAAI,GAAG,SAAb;AACA,MAAMC,QAAQ,GAAG,IAAjB;AACA,MAAMC,UAAU,GAAG,GAAnB;;AACA,MAAMC,IAAI,GAAGL,OAAO,CAAC,MAAD,CAApB;;AAIAC,GAAG,CAACK,GAAJ,CAAQ,SAAR,EAAkBP,OAAO,CAACQ,MAAR,CAAeC,SAAS,GAAG,SAA3B,CAAlB;AACAP,GAAG,CAACQ,GAAJ,CAAQ,OAAR,EAAiBJ,IAAI,CAACK,OAAL,CAAaC,OAAO,CAACC,GAAR,EAAb,EAA2B,KAA3B,EAAiC,OAAjC,CAAjB;AACAX,GAAG,CAACQ,GAAJ,CAAQ,aAAR,EAAuB,KAAvB,E,CAA+B;;AAE/BI,eAAaC,MAAb,CAAoBV,UAApB,EAA+BF,IAA/B,EAAoC,MAAI;AACpCa,EAAAA,OAAO,CAACC,GAAR,CAAY;AACRC,IAAAA,IAAI,EAAE,eADE;AAERf,IAAAA,IAFQ;AAGRE,IAAAA;AAHQ,GAAZ;AAKH,CAND;;AAOAH,GAAG,CAACa,MAAJ,CAAWX,QAAX,EAAoBD,IAApB,EAA0B,MAAI;AAC1Ba,EAAAA,OAAO,CAACC,GAAR,CAAY;AACRC,IAAAA,IAAI,EAAE,YADE;AAERf,IAAAA,IAFQ;AAGRC,IAAAA;AAHQ,GAAZ;AAKH,CAND;AAQAF,GAAG,CAACiB,GAAJ,CAAQ,OAAR,EAAgB,CAACC,GAAD,EAAKC,GAAL,KAAW;AACvBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,OAAX;AACH,CAFD",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/",
      "sourcesContent": [
        "const express = require('express');\nconst app = express();\nconst host = '0.0.0.0';\nconst httpPort = 3000;\nconst socketPort = 777;\nconst path = require('path');\n\nimport socketServer from './socket.io/index';\n\napp.use('/public',express.static(__dirname + '/public'));\napp.set('views', path.resolve(process.cwd(),'src','views'));\napp.set('view engine', 'ejs'); //extension of views\n\nsocketServer.listen(socketPort,host,()=>{\n    console.log({\n        task: 'socket server',\n        host,\n        socketPort \n    });\n})\napp.listen(httpPort,host, ()=>{\n    console.log({\n        task: 'app server',\n        host,\n        httpPort \n    });\n});\n\napp.get('/game',(req,res)=>{\n    res.render('index');\n})\n\n\n\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1604984260743
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps",
      "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst server = require(\"http\").createServer();\n\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24\n}); // io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\n\nconst rooms = {};\nio.on(\"connection\", socket => {\n  socket.on(\"join-room\", async ({\n    roomId\n  }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n\n      console.log({\n        rooms\n      });\n    } catch (error) {\n      console.log({\n        task: \"socket.io\",\n        error\n      });\n    }\n  });\n  socket.on(\"device-to-server\", data => {\n    if (data && data.roomId) {\n      console.log(data);\n      data.roomId = data.roomId.toString();\n      io.sockets.in(data.roomId).emit(\"server-to-client\", data); // io.to(data.roomId).emit(\"server-to-client\",data);\n    }\n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      socket.leave(socket.roomId);\n\n      if (socket.roomId && rooms[socket.roomId]) {\n        console.log({\n          event: 'disconnect',\n          roomId: socket.roomId,\n          client: socket.id\n        });\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\nvar _default = server;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNlcnZlciIsInJlcXVpcmUiLCJjcmVhdGVTZXJ2ZXIiLCJpbyIsInNlcnZlQ2xpZW50IiwicGluZ0ludGVydmFsIiwicGluZ1RpbWVvdXQiLCJjb29raWUiLCJzZXRUaW1lb3V0Iiwicm9vbXMiLCJvbiIsInNvY2tldCIsInJvb21JZCIsInRvU3RyaW5nIiwiam9pbiIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJpZCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJ0YXNrIiwiZGF0YSIsInNvY2tldHMiLCJpbiIsImVtaXQiLCJsZWF2ZSIsImV2ZW50IiwiY2xpZW50Iiwic3BsaWNlIiwiZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBUCxDQUFnQkMsWUFBaEIsRUFBZjs7QUFDQSxNQUFNQyxFQUFFLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQVAsQ0FBcUJELE1BQXJCLEVBQTZCO0FBQ3RDO0FBQ0FJLEVBQUFBLFdBQVcsRUFBRSxJQUZ5QjtBQUd0QztBQUNBQyxFQUFBQSxZQUFZLEVBQUUsS0FBSyxFQUFMLEdBQVUsSUFBVixHQUFpQixFQUpPO0FBS3RDQyxFQUFBQSxXQUFXLEVBQUUsS0FBSyxFQUFMLEdBQVUsRUFMZTtBQU10Q0MsRUFBQUEsTUFBTSxFQUFFLEtBTjhCO0FBT3RDQyxFQUFBQSxVQUFVLEVBQUUsS0FBSyxFQUFMLEdBQVUsSUFBVixHQUFpQjtBQVBTLENBQTdCLENBQVgsQyxDQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUEsTUFBTUMsS0FBSyxHQUFHLEVBQWQ7QUFDQU4sRUFBRSxDQUFDTyxFQUFILENBQU0sWUFBTixFQUFxQkMsTUFBRCxJQUFZO0FBQzlCQSxFQUFBQSxNQUFNLENBQUNELEVBQVAsQ0FBVSxXQUFWLEVBQXVCLE9BQU87QUFBRUUsSUFBQUE7QUFBRixHQUFQLEtBQXNCO0FBQzNDLFFBQUk7QUFDRkEsTUFBQUEsTUFBTSxHQUFHQSxNQUFNLENBQUNDLFFBQVAsRUFBVDtBQUNBRixNQUFBQSxNQUFNLENBQUNHLElBQVAsQ0FBWUYsTUFBWjtBQUNBRCxNQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0JBLE1BQWhCOztBQUNBLFVBQUlILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUIsSUFBekIsSUFBaUNILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUJHLFNBQTlELEVBQXlFO0FBQ3ZFTixRQUFBQSxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLEdBQXVCLEVBQXZCO0FBQ0Q7O0FBQ0QsVUFBSUgsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQkksT0FBckIsQ0FBNkJMLE1BQU0sQ0FBQ00sRUFBcEMsTUFBNEMsQ0FBQyxDQUFqRCxFQUFvRDtBQUNsRFIsUUFBQUEsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQk0sSUFBckIsQ0FBMEJQLE1BQU0sQ0FBQ00sRUFBakM7QUFDRDs7QUFDREUsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFBRVgsUUFBQUE7QUFBRixPQUFaO0FBQ0QsS0FYRCxDQVdFLE9BQU9ZLEtBQVAsRUFBYztBQUNkRixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWTtBQUFFRSxRQUFBQSxJQUFJLEVBQUUsV0FBUjtBQUFxQkQsUUFBQUE7QUFBckIsT0FBWjtBQUNEO0FBQ0YsR0FmRDtBQWdCQVYsRUFBQUEsTUFBTSxDQUFDRCxFQUFQLENBQVUsa0JBQVYsRUFBOEJhLElBQUQsSUFBUTtBQUNuQyxRQUFJQSxJQUFJLElBQUlBLElBQUksQ0FBQ1gsTUFBakIsRUFBd0I7QUFDdEJPLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRyxJQUFaO0FBQ0FBLE1BQUFBLElBQUksQ0FBQ1gsTUFBTCxHQUFjVyxJQUFJLENBQUNYLE1BQUwsQ0FBWUMsUUFBWixFQUFkO0FBQ0FWLE1BQUFBLEVBQUUsQ0FBQ3FCLE9BQUgsQ0FBV0MsRUFBWCxDQUFjRixJQUFJLENBQUNYLE1BQW5CLEVBQTJCYyxJQUEzQixDQUFnQyxrQkFBaEMsRUFBbURILElBQW5ELEVBSHNCLENBSXRCO0FBQ0Q7QUFFRixHQVJEO0FBU0FaLEVBQUFBLE1BQU0sQ0FBQ0QsRUFBUCxDQUFVLFlBQVYsRUFBd0IsVUFBVWEsSUFBVixFQUFnQjtBQUN0QyxRQUFJO0FBQ0ZaLE1BQUFBLE1BQU0sQ0FBQ2dCLEtBQVAsQ0FBYWhCLE1BQU0sQ0FBQ0MsTUFBcEI7O0FBQ0EsVUFBSUQsTUFBTSxDQUFDQyxNQUFQLElBQWlCSCxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUExQixFQUEyQztBQUN6Q08sUUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFDVlEsVUFBQUEsS0FBSyxFQUFFLFlBREc7QUFFVmhCLFVBQUFBLE1BQU0sRUFBRUQsTUFBTSxDQUFDQyxNQUZMO0FBR1ZpQixVQUFBQSxNQUFNLEVBQUVsQixNQUFNLENBQUNNO0FBSEwsU0FBWjtBQUtBUixRQUFBQSxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLENBQXFCa0IsTUFBckIsQ0FBNEJyQixLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLENBQXFCSSxPQUFyQixDQUE2QkwsTUFBTSxDQUFDTSxFQUFwQyxDQUE1QixFQUFxRSxDQUFyRTtBQUNEO0FBRUYsS0FYRCxDQVdFLE9BQU9jLENBQVAsRUFBVTtBQUNWWixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWVcsQ0FBWjtBQUNEO0FBQ0YsR0FmRDtBQWdCRCxDQTFDRDtlQTRDZS9CLE0iLCJzb3VyY2VSb290IjoiL21lZGlhL3RvYW5oMjYxMi9EYXRhMS9sZWFybi9FbWJlZGRlZF9zb2Z0d2FyZS9wcm9qZWN0L3BpbmctcG9uZy12cHMvc3JjL3NvY2tldC5pby8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXJ2ZXIgPSByZXF1aXJlKFwiaHR0cFwiKS5jcmVhdGVTZXJ2ZXIoKTtcbmNvbnN0IGlvID0gcmVxdWlyZShcInNvY2tldC5pb1wiKShzZXJ2ZXIsIHtcbiAgLy8gcGF0aDogJy90ZXN0JyxcbiAgc2VydmVDbGllbnQ6IHRydWUsXG4gIC8vIGJlbG93IGFyZSBlbmdpbmUuSU8gb3B0aW9uc1xuICBwaW5nSW50ZXJ2YWw6IDYwICogNjAgKiAxMDAwICogMjQsXG4gIHBpbmdUaW1lb3V0OiA2MCAqIDYwICogMTAsXG4gIGNvb2tpZTogZmFsc2UsXG4gIHNldFRpbWVvdXQ6IDYwICogNjAgKiAxMDAwICogMjQsXG59KTtcblxuLy8gaW8udXNlKGZ1bmN0aW9uIChzb2NrZXQsIG5leHQpIHtcbi8vICAgY29uc3QgdG9rZW4gPVxuLy8gICAgIHNvY2tldC5oYW5kc2hha2UgJiYgc29ja2V0LmhhbmRzaGFrZS5xdWVyeSAmJiBzb2NrZXQuaGFuZHNoYWtlLnF1ZXJ5LnRva2VuXG4vLyAgICAgICA/IHNvY2tldC5oYW5kc2hha2UucXVlcnkudG9rZW5cbi8vICAgICAgIDogXCJcIjtcblxuLy8gICBqd3QudmVyaWZ5KHRva2VuLCBDT05GSUdbXCJKV1RfU0VDUkVUXCJdLCBmdW5jdGlvbiAoZXJyb3IsIGRlY29kZWQpIHtcbi8vICAgICBpZiAoZXJyb3IpIHtcbi8vICAgICAgIHJlc3BvbnNlRXJyb3JTb2NrZXQoe1xuLy8gICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuLy8gICAgICAgICBtZXNzYWdlOiBcIlVuYXV0aGVudGljYXRpY2VkIHNvY2tldCBcIixcbi8vICAgICAgICAgZXJyb3I6IFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIsXG4vLyAgICAgICB9KTtcbi8vICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc29ja2V0LmRpc2Nvbm5lY3QodHJ1ZSksIDUwMDApO1xuLy8gICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIpO1xuLy8gICAgIH1cbi8vICAgfSk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG5jb25zdCByb29tcyA9IHt9O1xuaW8ub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcbiAgc29ja2V0Lm9uKFwiam9pbi1yb29tXCIsIGFzeW5jICh7IHJvb21JZCB9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJvb21JZCA9IHJvb21JZC50b1N0cmluZygpO1xuICAgICAgc29ja2V0LmpvaW4ocm9vbUlkKTtcbiAgICAgIHNvY2tldC5yb29tSWQgPSByb29tSWQ7XG4gICAgICBpZiAocm9vbXNbc29ja2V0LnJvb21JZF0gPT09IG51bGwgfHwgcm9vbXNbc29ja2V0LnJvb21JZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXSA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSA9PT0gLTEpIHtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0ucHVzaChzb2NrZXQuaWQpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coeyByb29tcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coeyB0YXNrOiBcInNvY2tldC5pb1wiLCBlcnJvciB9KTtcbiAgICB9XG4gIH0pO1xuICBzb2NrZXQub24oXCJkZXZpY2UtdG8tc2VydmVyXCIsKGRhdGEpPT57XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5yb29tSWQpe1xuICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgIGRhdGEucm9vbUlkID0gZGF0YS5yb29tSWQudG9TdHJpbmcoKTtcbiAgICAgIGlvLnNvY2tldHMuaW4oZGF0YS5yb29tSWQpLmVtaXQoXCJzZXJ2ZXItdG8tY2xpZW50XCIsZGF0YSk7XG4gICAgICAvLyBpby50byhkYXRhLnJvb21JZCkuZW1pdChcInNlcnZlci10by1jbGllbnRcIixkYXRhKTtcbiAgICB9XG4gICAgXG4gIH0pO1xuICBzb2NrZXQub24oXCJkaXNjb25uZWN0XCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIHNvY2tldC5sZWF2ZShzb2NrZXQucm9vbUlkKTtcbiAgICAgIGlmIChzb2NrZXQucm9vbUlkICYmIHJvb21zW3NvY2tldC5yb29tSWRdKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHtcbiAgICAgICAgICBldmVudDogJ2Rpc2Nvbm5lY3QnLFxuICAgICAgICAgIHJvb21JZDogc29ja2V0LnJvb21JZCxcbiAgICAgICAgICBjbGllbnQ6IHNvY2tldC5pZFxuICAgICAgICB9KTtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0uc3BsaWNlKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSwgMSk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHNlcnZlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "server",
        "require",
        "createServer",
        "io",
        "serveClient",
        "pingInterval",
        "pingTimeout",
        "cookie",
        "setTimeout",
        "rooms",
        "on",
        "socket",
        "roomId",
        "toString",
        "join",
        "undefined",
        "indexOf",
        "id",
        "push",
        "console",
        "log",
        "error",
        "task",
        "data",
        "sockets",
        "in",
        "emit",
        "leave",
        "event",
        "client",
        "splice",
        "e"
      ],
      "mappings": "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",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/",
      "sourcesContent": [
        "const server = require(\"http\").createServer();\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24,\n});\n\n// io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\nconst rooms = {};\nio.on(\"connection\", (socket) => {\n  socket.on(\"join-room\", async ({ roomId }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n      console.log({ rooms });\n    } catch (error) {\n      console.log({ task: \"socket.io\", error });\n    }\n  });\n  socket.on(\"device-to-server\",(data)=>{\n    if (data && data.roomId){\n      console.log(data)\n      data.roomId = data.roomId.toString();\n      io.sockets.in(data.roomId).emit(\"server-to-client\",data);\n      // io.to(data.roomId).emit(\"server-to-client\",data);\n    }\n    \n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      socket.leave(socket.roomId);\n      if (socket.roomId && rooms[socket.roomId]) {\n        console.log({\n          event: 'disconnect',\n          roomId: socket.roomId,\n          client: socket.id\n        });\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\n\nexport default server;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1602749146826
  },
  "{\"sourceRoot\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps\",\"filename\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps\",\"plugins\":[{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps",
      "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js",
        "plugins": [
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst server = require(\"http\").createServer();\n\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24\n}); // io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\n\nconst rooms = {};\nio.on(\"connection\", socket => {\n  socket.on(\"join-room\", async ({\n    roomId\n  }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n\n      console.log({\n        rooms\n      });\n    } catch (error) {\n      console.log({\n        task: \"socket.io\",\n        error\n      });\n    }\n  });\n  socket.on(\"device-to-server\", data => {\n    if (data && data.roomId) {\n      console.log(data);\n      data.roomId = data.roomId.toString();\n      io.sockets.in(data.roomId).emit(\"server-to-client\", data); // io.to(data.roomId).emit(\"server-to-client\",data);\n    }\n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      socket.leave(socket.roomId);\n\n      if (socket.roomId && rooms[socket.roomId]) {\n        console.log({\n          event: 'disconnect',\n          roomId: socket.roomId,\n          client: socket.id\n        });\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\nvar _default = server;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNlcnZlciIsInJlcXVpcmUiLCJjcmVhdGVTZXJ2ZXIiLCJpbyIsInNlcnZlQ2xpZW50IiwicGluZ0ludGVydmFsIiwicGluZ1RpbWVvdXQiLCJjb29raWUiLCJzZXRUaW1lb3V0Iiwicm9vbXMiLCJvbiIsInNvY2tldCIsInJvb21JZCIsInRvU3RyaW5nIiwiam9pbiIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJpZCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJ0YXNrIiwiZGF0YSIsInNvY2tldHMiLCJpbiIsImVtaXQiLCJsZWF2ZSIsImV2ZW50IiwiY2xpZW50Iiwic3BsaWNlIiwiZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBUCxDQUFnQkMsWUFBaEIsRUFBZjs7QUFDQSxNQUFNQyxFQUFFLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQVAsQ0FBcUJELE1BQXJCLEVBQTZCO0FBQ3RDO0FBQ0FJLEVBQUFBLFdBQVcsRUFBRSxJQUZ5QjtBQUd0QztBQUNBQyxFQUFBQSxZQUFZLEVBQUUsS0FBSyxFQUFMLEdBQVUsSUFBVixHQUFpQixFQUpPO0FBS3RDQyxFQUFBQSxXQUFXLEVBQUUsS0FBSyxFQUFMLEdBQVUsRUFMZTtBQU10Q0MsRUFBQUEsTUFBTSxFQUFFLEtBTjhCO0FBT3RDQyxFQUFBQSxVQUFVLEVBQUUsS0FBSyxFQUFMLEdBQVUsSUFBVixHQUFpQjtBQVBTLENBQTdCLENBQVgsQyxDQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUEsTUFBTUMsS0FBSyxHQUFHLEVBQWQ7QUFDQU4sRUFBRSxDQUFDTyxFQUFILENBQU0sWUFBTixFQUFxQkMsTUFBRCxJQUFZO0FBQzlCQSxFQUFBQSxNQUFNLENBQUNELEVBQVAsQ0FBVSxXQUFWLEVBQXVCLE9BQU87QUFBRUUsSUFBQUE7QUFBRixHQUFQLEtBQXNCO0FBQzNDLFFBQUk7QUFDRkEsTUFBQUEsTUFBTSxHQUFHQSxNQUFNLENBQUNDLFFBQVAsRUFBVDtBQUNBRixNQUFBQSxNQUFNLENBQUNHLElBQVAsQ0FBWUYsTUFBWjtBQUNBRCxNQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0JBLE1BQWhCOztBQUNBLFVBQUlILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUIsSUFBekIsSUFBaUNILEtBQUssQ0FBQ0UsTUFBTSxDQUFDQyxNQUFSLENBQUwsS0FBeUJHLFNBQTlELEVBQXlFO0FBQ3ZFTixRQUFBQSxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLEdBQXVCLEVBQXZCO0FBQ0Q7O0FBQ0QsVUFBSUgsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQkksT0FBckIsQ0FBNkJMLE1BQU0sQ0FBQ00sRUFBcEMsTUFBNEMsQ0FBQyxDQUFqRCxFQUFvRDtBQUNsRFIsUUFBQUEsS0FBSyxDQUFDRSxNQUFNLENBQUNDLE1BQVIsQ0FBTCxDQUFxQk0sSUFBckIsQ0FBMEJQLE1BQU0sQ0FBQ00sRUFBakM7QUFDRDs7QUFDREUsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFBRVgsUUFBQUE7QUFBRixPQUFaO0FBQ0QsS0FYRCxDQVdFLE9BQU9ZLEtBQVAsRUFBYztBQUNkRixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWTtBQUFFRSxRQUFBQSxJQUFJLEVBQUUsV0FBUjtBQUFxQkQsUUFBQUE7QUFBckIsT0FBWjtBQUNEO0FBQ0YsR0FmRDtBQWdCQVYsRUFBQUEsTUFBTSxDQUFDRCxFQUFQLENBQVUsa0JBQVYsRUFBOEJhLElBQUQsSUFBUTtBQUNuQyxRQUFJQSxJQUFJLElBQUlBLElBQUksQ0FBQ1gsTUFBakIsRUFBd0I7QUFDdEJPLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRyxJQUFaO0FBQ0FBLE1BQUFBLElBQUksQ0FBQ1gsTUFBTCxHQUFjVyxJQUFJLENBQUNYLE1BQUwsQ0FBWUMsUUFBWixFQUFkO0FBQ0FWLE1BQUFBLEVBQUUsQ0FBQ3FCLE9BQUgsQ0FBV0MsRUFBWCxDQUFjRixJQUFJLENBQUNYLE1BQW5CLEVBQTJCYyxJQUEzQixDQUFnQyxrQkFBaEMsRUFBbURILElBQW5ELEVBSHNCLENBSXRCO0FBQ0Q7QUFFRixHQVJEO0FBU0FaLEVBQUFBLE1BQU0sQ0FBQ0QsRUFBUCxDQUFVLFlBQVYsRUFBd0IsVUFBVWEsSUFBVixFQUFnQjtBQUN0QyxRQUFJO0FBQ0ZaLE1BQUFBLE1BQU0sQ0FBQ2dCLEtBQVAsQ0FBYWhCLE1BQU0sQ0FBQ0MsTUFBcEI7O0FBQ0EsVUFBSUQsTUFBTSxDQUFDQyxNQUFQLElBQWlCSCxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUExQixFQUEyQztBQUN6Q08sUUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVk7QUFDVlEsVUFBQUEsS0FBSyxFQUFFLFlBREc7QUFFVmhCLFVBQUFBLE1BQU0sRUFBRUQsTUFBTSxDQUFDQyxNQUZMO0FBR1ZpQixVQUFBQSxNQUFNLEVBQUVsQixNQUFNLENBQUNNO0FBSEwsU0FBWjtBQUtBUixRQUFBQSxLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLENBQXFCa0IsTUFBckIsQ0FBNEJyQixLQUFLLENBQUNFLE1BQU0sQ0FBQ0MsTUFBUixDQUFMLENBQXFCSSxPQUFyQixDQUE2QkwsTUFBTSxDQUFDTSxFQUFwQyxDQUE1QixFQUFxRSxDQUFyRTtBQUNEO0FBRUYsS0FYRCxDQVdFLE9BQU9jLENBQVAsRUFBVTtBQUNWWixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWVcsQ0FBWjtBQUNEO0FBQ0YsR0FmRDtBQWdCRCxDQTFDRDtlQTRDZS9CLE0iLCJzb3VyY2VSb290IjoiL21lZGlhL3RvYW5oMjYxMi9EYXRhMS9sZWFybi9FbWJlZGRlZF9zb2Z0d2FyZS9wcm9qZWN0L3BpbmctcG9uZy12cHMvc3JjL3NvY2tldC5pby8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXJ2ZXIgPSByZXF1aXJlKFwiaHR0cFwiKS5jcmVhdGVTZXJ2ZXIoKTtcbmNvbnN0IGlvID0gcmVxdWlyZShcInNvY2tldC5pb1wiKShzZXJ2ZXIsIHtcbiAgLy8gcGF0aDogJy90ZXN0JyxcbiAgc2VydmVDbGllbnQ6IHRydWUsXG4gIC8vIGJlbG93IGFyZSBlbmdpbmUuSU8gb3B0aW9uc1xuICBwaW5nSW50ZXJ2YWw6IDYwICogNjAgKiAxMDAwICogMjQsXG4gIHBpbmdUaW1lb3V0OiA2MCAqIDYwICogMTAsXG4gIGNvb2tpZTogZmFsc2UsXG4gIHNldFRpbWVvdXQ6IDYwICogNjAgKiAxMDAwICogMjQsXG59KTtcblxuLy8gaW8udXNlKGZ1bmN0aW9uIChzb2NrZXQsIG5leHQpIHtcbi8vICAgY29uc3QgdG9rZW4gPVxuLy8gICAgIHNvY2tldC5oYW5kc2hha2UgJiYgc29ja2V0LmhhbmRzaGFrZS5xdWVyeSAmJiBzb2NrZXQuaGFuZHNoYWtlLnF1ZXJ5LnRva2VuXG4vLyAgICAgICA/IHNvY2tldC5oYW5kc2hha2UucXVlcnkudG9rZW5cbi8vICAgICAgIDogXCJcIjtcblxuLy8gICBqd3QudmVyaWZ5KHRva2VuLCBDT05GSUdbXCJKV1RfU0VDUkVUXCJdLCBmdW5jdGlvbiAoZXJyb3IsIGRlY29kZWQpIHtcbi8vICAgICBpZiAoZXJyb3IpIHtcbi8vICAgICAgIHJlc3BvbnNlRXJyb3JTb2NrZXQoe1xuLy8gICAgICAgICBzb2NrZXRJZDogc29ja2V0LmlkLFxuLy8gICAgICAgICBtZXNzYWdlOiBcIlVuYXV0aGVudGljYXRpY2VkIHNvY2tldCBcIixcbi8vICAgICAgICAgZXJyb3I6IFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIsXG4vLyAgICAgICB9KTtcbi8vICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc29ja2V0LmRpc2Nvbm5lY3QodHJ1ZSksIDUwMDApO1xuLy8gICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hdXRoZW50aWNhdGljZWQgc29ja2V0XCIpO1xuLy8gICAgIH1cbi8vICAgfSk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG5jb25zdCByb29tcyA9IHt9O1xuaW8ub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcbiAgc29ja2V0Lm9uKFwiam9pbi1yb29tXCIsIGFzeW5jICh7IHJvb21JZCB9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJvb21JZCA9IHJvb21JZC50b1N0cmluZygpO1xuICAgICAgc29ja2V0LmpvaW4ocm9vbUlkKTtcbiAgICAgIHNvY2tldC5yb29tSWQgPSByb29tSWQ7XG4gICAgICBpZiAocm9vbXNbc29ja2V0LnJvb21JZF0gPT09IG51bGwgfHwgcm9vbXNbc29ja2V0LnJvb21JZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByb29tc1tzb2NrZXQucm9vbUlkXSA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSA9PT0gLTEpIHtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0ucHVzaChzb2NrZXQuaWQpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coeyByb29tcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coeyB0YXNrOiBcInNvY2tldC5pb1wiLCBlcnJvciB9KTtcbiAgICB9XG4gIH0pO1xuICBzb2NrZXQub24oXCJkZXZpY2UtdG8tc2VydmVyXCIsKGRhdGEpPT57XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5yb29tSWQpe1xuICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgIGRhdGEucm9vbUlkID0gZGF0YS5yb29tSWQudG9TdHJpbmcoKTtcbiAgICAgIGlvLnNvY2tldHMuaW4oZGF0YS5yb29tSWQpLmVtaXQoXCJzZXJ2ZXItdG8tY2xpZW50XCIsZGF0YSk7XG4gICAgICAvLyBpby50byhkYXRhLnJvb21JZCkuZW1pdChcInNlcnZlci10by1jbGllbnRcIixkYXRhKTtcbiAgICB9XG4gICAgXG4gIH0pO1xuICBzb2NrZXQub24oXCJkaXNjb25uZWN0XCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIHNvY2tldC5sZWF2ZShzb2NrZXQucm9vbUlkKTtcbiAgICAgIGlmIChzb2NrZXQucm9vbUlkICYmIHJvb21zW3NvY2tldC5yb29tSWRdKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHtcbiAgICAgICAgICBldmVudDogJ2Rpc2Nvbm5lY3QnLFxuICAgICAgICAgIHJvb21JZDogc29ja2V0LnJvb21JZCxcbiAgICAgICAgICBjbGllbnQ6IHNvY2tldC5pZFxuICAgICAgICB9KTtcbiAgICAgICAgcm9vbXNbc29ja2V0LnJvb21JZF0uc3BsaWNlKHJvb21zW3NvY2tldC5yb29tSWRdLmluZGV4T2Yoc29ja2V0LmlkKSwgMSk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHNlcnZlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "server",
        "require",
        "createServer",
        "io",
        "serveClient",
        "pingInterval",
        "pingTimeout",
        "cookie",
        "setTimeout",
        "rooms",
        "on",
        "socket",
        "roomId",
        "toString",
        "join",
        "undefined",
        "indexOf",
        "id",
        "push",
        "console",
        "log",
        "error",
        "task",
        "data",
        "sockets",
        "in",
        "emit",
        "leave",
        "event",
        "client",
        "splice",
        "e"
      ],
      "mappings": "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",
      "sourceRoot": "/media/toanh2612/Data1/learn/Embedded_software/project/ping-pong-vps/src/socket.io/",
      "sourcesContent": [
        "const server = require(\"http\").createServer();\nconst io = require(\"socket.io\")(server, {\n  // path: '/test',\n  serveClient: true,\n  // below are engine.IO options\n  pingInterval: 60 * 60 * 1000 * 24,\n  pingTimeout: 60 * 60 * 10,\n  cookie: false,\n  setTimeout: 60 * 60 * 1000 * 24,\n});\n\n// io.use(function (socket, next) {\n//   const token =\n//     socket.handshake && socket.handshake.query && socket.handshake.query.token\n//       ? socket.handshake.query.token\n//       : \"\";\n\n//   jwt.verify(token, CONFIG[\"JWT_SECRET\"], function (error, decoded) {\n//     if (error) {\n//       responseErrorSocket({\n//         socketId: socket.id,\n//         message: \"Unauthenticaticed socket \",\n//         error: \"Unauthenticaticed socket\",\n//       });\n//       setTimeout(() => socket.disconnect(true), 5000);\n//       throw new Error(\"Unauthenticaticed socket\");\n//     }\n//   });\n//   next();\n// });\n\nconst rooms = {};\nio.on(\"connection\", (socket) => {\n  socket.on(\"join-room\", async ({ roomId }) => {\n    try {\n      roomId = roomId.toString();\n      socket.join(roomId);\n      socket.roomId = roomId;\n      if (rooms[socket.roomId] === null || rooms[socket.roomId] === undefined) {\n        rooms[socket.roomId] = [];\n      }\n      if (rooms[socket.roomId].indexOf(socket.id) === -1) {\n        rooms[socket.roomId].push(socket.id);\n      }\n      console.log({ rooms });\n    } catch (error) {\n      console.log({ task: \"socket.io\", error });\n    }\n  });\n  socket.on(\"device-to-server\",(data)=>{\n    if (data && data.roomId){\n      console.log(data)\n      data.roomId = data.roomId.toString();\n      io.sockets.in(data.roomId).emit(\"server-to-client\",data);\n      // io.to(data.roomId).emit(\"server-to-client\",data);\n    }\n    \n  });\n  socket.on(\"disconnect\", function (data) {\n    try {\n      socket.leave(socket.roomId);\n      if (socket.roomId && rooms[socket.roomId]) {\n        console.log({\n          event: 'disconnect',\n          roomId: socket.roomId,\n          client: socket.id\n        });\n        rooms[socket.roomId].splice(rooms[socket.roomId].indexOf(socket.id), 1);\n      }\n\n    } catch (e) {\n      console.log(e);\n    }\n  });\n});\n\nexport default server;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1602749146826
  }
}